<button id="getCouponBtn">รับคูปอง</button>
<div id="couponCode"></div>

<script>
  const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbz88gEDr3AeoJmHDgcwjabwk08NL5Nx5x1E8n6Ia3DohIv7V3fXrj-tbIzoLa7bSqG4/exec";

  document.getElementById('getCouponBtn').addEventListener('click', async function() {
    const deviceId = localStorage.getItem('device_id') || ("dev-" + Math.random().toString(36).substr(2,9));
    localStorage.setItem('device_id', deviceId);

    const response = await fetch(`${SCRIPT_URL}?device_id=${deviceId}&coupon_id=0`);
    const data = await response.json();

    if(data.status === "ok") {
      document.getElementById('couponCode').innerText = "โค้ดคูปองของคุณ: " + data.code;
      alert("โค้ดของคุณ: " + data.code);
    } else {
      alert(data.message);
    }
  });
</script>
