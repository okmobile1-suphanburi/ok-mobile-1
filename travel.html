<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Travel Pro - Complete Edition</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Kanit', sans-serif; background: #f1f5f9; }
    .gradient-header { background: linear-gradient(135deg, #0f172a 0%, #1e40af 100%); }
    .post-card { transition: all 0.3s ease; border-radius: 1.5rem; overflow: hidden; cursor: pointer; }
    .post-card:hover { transform: translateY(-8px); box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1); }
    
    @keyframes skeleton-pulse {
      0%, 100% { background-color: #e2e8f0; }
      50% { background-color: #f1f5f9; }
    }
    .skeleton { animation: skeleton-pulse 1.5s infinite ease-in-out; border-radius: 1rem; }

    .edit-mode-active { 
      border: 4px solid #f59e0b !important; 
      background-color: #fffbeb !important; 
      box-shadow: 0 0 30px rgba(245, 158, 11, 0.4) !important;
      transform: scale(1.02);
    }
    .edit-shake { animation: shake 0.4s ease-in-out 2; }
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-5px); }
      75% { transform: translateX(5px); }
    }

    .filter-active { background-color: #3b82f6 !important; color: white !important; border-color: #3b82f6 !important; }
    .modal-open { overflow: hidden; }

    @media (max-width: 1023px) {
      #formWrapper {
        display: none;
        position: fixed;
        inset: 0;
        z-index: 150;
        background: rgba(0,0,0,0.6);
        backdrop-filter: blur(4px);
        align-items: center;
        justify-content: center;
        padding: 1rem;
      }
      #formWrapper.active { display: flex; }
      #formContainer { width: 100%; max-height: 90vh; overflow-y: auto; }
    }

    @keyframes bounce-short {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-5px); }
    }
    .animate-bounce-short { animation: bounce-short 3s infinite; }
    
    #imagePreviewContainer { display: none; margin-top: 10px; }
    .preview-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; }
    .preview-grid img { width: 100%; height: 80px; object-fit: cover; border-radius: 0.75rem; border: 2px solid #e2e8f0; }
  </style>
</head>
<body class="min-h-screen pb-20">

  <header class="gradient-header text-white py-12 shadow-2xl text-center mb-10">
    <h1 class="text-4xl font-bold tracking-widest">üåç TRAVEL PRO COMMUNITY</h1>
    <p class="mt-2 opacity-80">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß ‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å ‡πÅ‡∏•‡∏∞‡πÅ‡∏ä‡∏£‡πå‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</p>
  </header>

  <div class="container mx-auto px-4 max-w-7xl">
    <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
      
      <div id="formWrapper" class="lg:col-span-1">
        <div id="formContainer" class="bg-white p-6 rounded-3xl shadow-xl border border-gray-100 sticky top-5 transition-all duration-500">
          <div class="flex justify-between items-center mb-6">
            <h2 id="formTitle" class="text-xl font-bold text-gray-800 flex items-center gap-2">‚úçÔ∏è ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏û‡∏™‡∏ï‡πå‡πÉ‡∏´‡∏°‡πà</h2>
            <button onclick="toggleForm()" class="lg:hidden text-gray-400 hover:text-red-500 text-2xl">‚úï</button>
          </div>
          <form id="travelForm" class="space-y-4">
            <select id="category" class="w-full px-4 py-2.5 rounded-xl border bg-gray-50 outline-none focus:ring-2 focus:ring-blue-500 text-sm">
                <option value="" disabled selected>üìç ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î</option>
                <option value="‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏°‡∏´‡∏≤‡∏ô‡∏Ñ‡∏£">‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏°‡∏´‡∏≤‡∏ô‡∏Ñ‡∏£</option><option value="‡∏Å‡∏£‡∏∞‡∏ö‡∏µ‡πà">‡∏Å‡∏£‡∏∞‡∏ö‡∏µ‡πà</option><option value="‡∏Å‡∏≤‡∏ç‡∏à‡∏ô‡∏ö‡∏∏‡∏£‡∏µ">‡∏Å‡∏≤‡∏ç‡∏à‡∏ô‡∏ö‡∏∏‡∏£‡∏µ</option><option value="‡∏Å‡∏≤‡∏¨‡∏™‡∏¥‡∏ô‡∏ò‡∏∏‡πå">‡∏Å‡∏≤‡∏¨‡∏™‡∏¥‡∏ô‡∏ò‡∏∏‡πå</option><option value="‡∏Å‡∏≥‡πÅ‡∏û‡∏á‡πÄ‡∏û‡∏ä‡∏£">‡∏Å‡∏≥‡πÅ‡∏û‡∏á‡πÄ‡∏û‡∏ä‡∏£</option><option value="‡∏Ç‡∏≠‡∏ô‡πÅ‡∏Å‡πà‡∏ô">‡∏Ç‡∏≠‡∏ô‡πÅ‡∏Å‡πà‡∏ô</option><option value="‡∏à‡∏±‡∏ô‡∏ó‡∏ö‡∏∏‡∏£‡∏µ">‡∏à‡∏±‡∏ô‡∏ó‡∏ö‡∏∏‡∏£‡∏µ</option><option value="‡∏â‡∏∞‡πÄ‡∏ä‡∏¥‡∏á‡πÄ‡∏ó‡∏£‡∏≤">‡∏â‡∏∞‡πÄ‡∏ä‡∏¥‡∏á‡πÄ‡∏ó‡∏£‡∏≤</option><option value="‡∏ä‡∏•‡∏ö‡∏∏‡∏£‡∏µ">‡∏ä‡∏•‡∏ö‡∏∏‡∏£‡∏µ</option><option value="‡∏ä‡∏±‡∏¢‡∏ô‡∏≤‡∏ó">‡∏ä‡∏±‡∏¢‡∏ô‡∏≤‡∏ó</option><option value="‡∏ä‡∏±‡∏¢‡∏†‡∏π‡∏°‡∏¥">‡∏ä‡∏±‡∏¢‡∏†‡∏π‡∏°‡∏¥</option><option value="‡∏ä‡∏∏‡∏°‡∏û‡∏£">‡∏ä‡∏∏‡∏°‡∏û‡∏£</option><option value="‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡∏£‡∏≤‡∏¢">‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡∏£‡∏≤‡∏¢</option><option value="‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà">‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà</option><option value="‡∏ï‡∏£‡∏±‡∏á">‡∏ï‡∏£‡∏±‡∏á</option><option value="‡∏ï‡∏£‡∏≤‡∏î">‡∏ï‡∏£‡∏≤‡∏î</option><option value="‡∏ï‡∏≤‡∏Å">‡∏ï‡∏≤‡∏Å</option><option value="‡∏ô‡∏Ñ‡∏£‡∏ô‡∏≤‡∏¢‡∏Å">‡∏ô‡∏Ñ‡∏£‡∏ô‡∏≤‡∏¢‡∏Å</option><option value="‡∏ô‡∏Ñ‡∏£‡∏õ‡∏ê‡∏°">‡∏ô‡∏Ñ‡∏£‡∏õ‡∏ê‡∏°</option><option value="‡∏ô‡∏Ñ‡∏£‡∏û‡∏ô‡∏°">‡∏ô‡∏Ñ‡∏£‡∏û‡∏ô‡∏°</option><option value="‡∏ô‡∏Ñ‡∏£‡∏£‡∏≤‡∏ä‡∏™‡∏µ‡∏°‡∏≤">‡∏ô‡∏Ñ‡∏£‡∏£‡∏≤‡∏ä‡∏™‡∏µ‡∏°‡∏≤</option><option value="‡∏ô‡∏Ñ‡∏£‡∏®‡∏£‡∏µ‡∏ò‡∏£‡∏£‡∏°‡∏£‡∏≤‡∏ä">‡∏ô‡∏Ñ‡∏£‡∏®‡∏£‡∏µ‡∏ò‡∏£‡∏£‡∏°‡∏£‡∏≤‡∏ä</option><option value="‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå">‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå</option><option value="‡∏ô‡∏ô‡∏ó‡∏ö‡∏∏‡∏£‡∏µ">‡∏ô‡∏ô‡∏ó‡∏ö‡∏∏‡∏£‡∏µ</option><option value="‡∏ô‡∏£‡∏≤‡∏ò‡∏¥‡∏ß‡∏≤‡∏™">‡∏ô‡∏£‡∏≤‡∏ò‡∏¥‡∏ß‡∏≤‡∏™</option><option value="‡∏ô‡πà‡∏≤‡∏ô">‡∏ô‡πà‡∏≤‡∏ô</option><option value="‡∏ö‡∏∂‡∏á‡∏Å‡∏≤‡∏¨">‡∏ö‡∏∂‡∏á‡∏Å‡∏≤‡∏¨</option><option value="‡∏ö‡∏∏‡∏£‡∏µ‡∏£‡∏±‡∏°‡∏¢‡πå">‡∏ö‡∏∏‡∏£‡∏µ‡∏£‡∏±‡∏°‡∏¢‡πå</option><option value="‡∏õ‡∏ó‡∏∏‡∏°‡∏ò‡∏≤‡∏ô‡∏µ">‡∏õ‡∏ó‡∏∏‡∏°‡∏ò‡∏≤‡∏ô‡∏µ</option><option value="‡∏õ‡∏£‡∏∞‡∏à‡∏ß‡∏ö‡∏Ñ‡∏µ‡∏£‡∏µ‡∏Ç‡∏±‡∏ô‡∏ò‡πå">‡∏õ‡∏£‡∏∞‡∏à‡∏ß‡∏ö‡∏Ñ‡∏µ‡∏£‡∏µ‡∏Ç‡∏±‡∏ô‡∏ò‡πå</option><option value="‡∏õ‡∏£‡∏≤‡∏à‡∏µ‡∏ô‡∏ö‡∏∏‡∏£‡∏µ">‡∏õ‡∏£‡∏≤‡∏à‡∏µ‡∏ô‡∏ö‡∏∏‡∏£‡∏µ</option><option value="‡∏õ‡∏±‡∏ï‡∏ï‡∏≤‡∏ô‡∏µ">‡∏õ‡∏±‡∏ï‡∏ï‡∏≤‡∏ô‡∏µ</option><option value="‡∏û‡∏£‡∏∞‡∏ô‡∏Ñ‡∏£‡∏®‡∏£‡∏µ‡∏≠‡∏¢‡∏∏‡∏ò‡∏¢‡∏≤">‡∏û‡∏£‡∏∞‡∏ô‡∏Ñ‡∏£‡∏®‡∏£‡∏µ‡∏≠‡∏¢‡∏∏‡∏ò‡∏¢‡∏≤</option><option value="‡∏û‡∏±‡∏á‡∏á‡∏≤">‡∏û‡∏±‡∏á‡∏á‡∏≤</option><option value="‡∏û‡∏±‡∏ó‡∏•‡∏∏‡∏á">‡∏û‡∏±‡∏ó‡∏•‡∏∏‡∏á</option><option value="‡∏û‡∏¥‡∏à‡∏¥‡∏ï‡∏£">‡∏û‡∏¥‡∏à‡∏¥‡∏ï‡∏£</option><option value="‡∏û‡∏¥‡∏©‡∏ì‡∏∏‡πÇ‡∏•‡∏Å">‡∏û‡∏¥‡∏©‡∏ì‡∏∏‡πÇ‡∏•‡∏Å</option><option value="‡πÄ‡∏û‡∏ä‡∏£‡∏ö‡∏∏‡∏£‡∏µ">‡πÄ‡∏û‡∏ä‡∏£‡∏ö‡∏∏‡∏£‡∏µ</option><option value="‡πÄ‡∏û‡∏ä‡∏£‡∏ö‡∏π‡∏£‡∏ì‡πå">‡πÄ‡∏û‡∏ä‡∏£‡∏ö‡∏π‡∏£‡∏ì‡πå</option><option value="‡πÅ‡∏û‡∏£‡πà">‡πÅ‡∏û‡∏£‡πà</option><option value="‡∏û‡∏∞‡πÄ‡∏¢‡∏≤">‡∏û‡∏∞‡πÄ‡∏¢‡∏≤</option><option value="‡∏†‡∏π‡πÄ‡∏Å‡πá‡∏ï">‡∏†‡∏π‡πÄ‡∏Å‡πá‡∏ï</option><option value="‡∏°‡∏´‡∏≤‡∏™‡∏≤‡∏£‡∏Ñ‡∏≤‡∏°">‡∏°‡∏´‡∏≤‡∏™‡∏≤‡∏£‡∏Ñ‡∏≤‡∏°</option><option value="‡∏°‡∏∏‡∏Å‡∏î‡∏≤‡∏´‡∏≤‡∏£">‡∏°‡∏∏‡∏Å‡∏î‡∏≤‡∏´‡∏≤‡∏£</option><option value="‡πÅ‡∏°‡πà‡∏Æ‡πà‡∏≠‡∏á‡∏™‡∏≠‡∏ô">‡πÅ‡∏°‡πà‡∏Æ‡πà‡∏≠‡∏á‡∏™‡∏≠‡∏ô</option><option value="‡∏¢‡∏∞‡∏•‡∏≤">‡∏¢‡∏∞‡∏•‡∏≤</option><option value="‡∏¢‡πÇ‡∏™‡∏ò‡∏£">‡∏¢‡πÇ‡∏™‡∏ò‡∏£</option><option value="‡∏£‡πâ‡∏≠‡∏¢‡πÄ‡∏≠‡πá‡∏î">‡∏£‡πâ‡∏≠‡∏¢‡πÄ‡∏≠‡πá‡∏î</option><option value="‡∏£‡∏∞‡∏ô‡∏≠‡∏á">‡∏£‡∏∞‡∏ô‡∏≠‡∏á</option><option value="‡∏£‡∏∞‡∏¢‡∏≠‡∏á">‡∏£‡∏∞‡∏¢‡∏≠‡∏á</option><option value="‡∏£‡∏≤‡∏ä‡∏ö‡∏∏‡∏£‡∏µ">‡∏£‡∏≤‡∏ä‡∏ö‡∏∏‡∏£‡∏µ</option><option value="‡∏•‡∏û‡∏ö‡∏∏‡∏£‡∏µ">‡∏•‡∏û‡∏ö‡∏∏‡∏£‡∏µ</option><option value="‡∏•‡∏≥‡∏õ‡∏≤‡∏á">‡∏•‡∏≥‡∏õ‡∏≤‡∏á</option><option value="‡∏•‡∏≥‡∏û‡∏π‡∏ô">‡∏•‡∏≥‡∏û‡∏π‡∏ô</option><option value="‡πÄ‡∏•‡∏¢">‡πÄ‡∏•‡∏¢</option><option value="‡∏®‡∏£‡∏µ‡∏™‡∏∞‡πÄ‡∏Å‡∏©">‡∏®‡∏£‡∏µ‡∏™‡∏∞‡πÄ‡∏Å‡∏©</option><option value="‡∏™‡∏Å‡∏•‡∏ô‡∏Ñ‡∏£">‡∏™‡∏Å‡∏•‡∏ô‡∏Ñ‡∏£</option><option value="‡∏™‡∏á‡∏Ç‡∏•‡∏≤">‡∏™‡∏á‡∏Ç‡∏•‡∏≤</option><option value="‡∏™‡∏ï‡∏π‡∏•">‡∏™‡∏ï‡∏π‡∏•</option><option value="‡∏™‡∏°‡∏∏‡∏ó‡∏£‡∏õ‡∏£‡∏≤‡∏Å‡∏≤‡∏£">‡∏™‡∏°‡∏∏‡∏ó‡∏£‡∏õ‡∏£‡∏≤‡∏Å‡∏≤‡∏£</option><option value="‡∏™‡∏°‡∏∏‡∏ó‡∏£‡∏™‡∏á‡∏Ñ‡∏£‡∏≤‡∏°">‡∏™‡∏°‡∏∏‡∏ó‡∏£‡∏™‡∏á‡∏Ñ‡∏£‡∏≤‡∏°</option><option value="‡∏™‡∏°‡∏∏‡∏ó‡∏£‡∏™‡∏≤‡∏Ñ‡∏£">‡∏™‡∏°‡∏∏‡∏ó‡∏£‡∏™‡∏≤‡∏Ñ‡∏£</option><option value="‡∏™‡∏£‡∏∞‡πÅ‡∏Å‡πâ‡∏ß">‡∏™‡∏£‡∏∞‡πÅ‡∏Å‡πâ‡∏ß</option><option value="‡∏™‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏µ">‡∏™‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏µ</option><option value="‡∏™‡∏¥‡∏á‡∏´‡πå‡∏ö‡∏∏‡∏£‡∏µ">‡∏™‡∏¥‡∏á‡∏´‡πå‡∏ö‡∏∏‡∏£‡∏µ</option><option value="‡∏™‡∏∏‡πÇ‡∏Ç‡∏ó‡∏±‡∏¢">‡∏™‡∏∏‡πÇ‡∏Ç‡∏ó‡∏±‡∏¢</option><option value="‡∏™‡∏∏‡∏û‡∏£‡∏£‡∏ì‡∏ö‡∏∏‡∏£‡∏µ">‡∏™‡∏∏‡∏û‡∏£‡∏£‡∏ì‡∏ö‡∏∏‡∏£‡∏µ</option><option value="‡∏™‡∏∏‡∏£‡∏≤‡∏©‡∏é‡∏£‡πå‡∏ò‡∏≤‡∏ô‡∏µ">‡∏™‡∏∏‡∏£‡∏≤‡∏©‡∏é‡∏£‡πå‡∏ò‡∏≤‡∏ô‡∏µ</option><option value="‡∏™‡∏∏‡∏£‡∏¥‡∏ô‡∏ó‡∏£‡πå">‡∏™‡∏∏‡∏£‡∏¥‡∏ô‡∏ó‡∏£‡πå</option><option value="‡∏´‡∏ô‡∏≠‡∏á‡∏Ñ‡∏≤‡∏¢">‡∏´‡∏ô‡∏≠‡∏á‡∏Ñ‡∏≤‡∏¢</option><option value="‡∏´‡∏ô‡∏≠‡∏á‡∏ö‡∏±‡∏ß‡∏•‡∏≥‡∏†‡∏π">‡∏´‡∏ô‡∏≠‡∏á‡∏ö‡∏±‡∏ß‡∏•‡∏≥‡∏†‡∏π</option><option value="‡∏≠‡πà‡∏≤‡∏á‡∏ó‡∏≠‡∏á">‡∏≠‡πà‡∏≤‡∏á‡∏ó‡∏≠‡∏á</option><option value="‡∏≠‡∏∏‡∏î‡∏£‡∏ò‡∏≤‡∏ô‡∏µ">‡∏≠‡∏∏‡∏î‡∏£‡∏ò‡∏≤‡∏ô‡∏µ</option><option value="‡∏≠‡∏∏‡∏ó‡∏±‡∏¢‡∏ò‡∏≤‡∏ô‡∏µ">‡∏≠‡∏∏‡∏ó‡∏±‡∏¢‡∏ò‡∏≤‡∏ô‡∏µ</option><option value="‡∏≠‡∏∏‡∏ï‡∏£‡∏î‡∏¥‡∏ï‡∏ñ‡πå">‡∏≠‡∏∏‡∏ï‡∏£‡∏î‡∏¥‡∏ï‡∏ñ‡πå</option><option value="‡∏≠‡∏∏‡∏ö‡∏•‡∏£‡∏≤‡∏ä‡∏ò‡∏≤‡∏ô‡∏µ">‡∏≠‡∏∏‡∏ö‡∏•‡∏£‡∏≤‡∏ä‡∏ò‡∏≤‡∏ô‡∏µ</option><option value="‡∏≠‡∏≥‡∏ô‡∏≤‡∏à‡πÄ‡∏à‡∏£‡∏¥‡∏ç">‡∏≠‡∏≥‡∏ô‡∏≤‡∏à‡πÄ‡∏à‡∏£‡∏¥‡∏ç</option>
            </select>
            <select id="placeType" class="w-full px-4 py-2.5 rounded-xl border bg-gray-50 outline-none focus:ring-2 focus:ring-blue-500 text-sm">
                <option value="‡∏ó‡∏µ‡πà‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß">üèûÔ∏è ‡∏ó‡∏µ‡πà‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß</option>
                <option value="‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å">üè® ‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å</option>
                <option value="‡∏Ñ‡∏≤‡πÄ‡∏ü‡πà/‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£">‚òï ‡∏Ñ‡∏≤‡πÄ‡∏ü‡πà/‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£</option>
                <option value="‡∏≠‡∏∑‡πà‡∏ô‡πÜ">‚ú® ‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option>
            </select>
            <input type="text" id="placeName" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà" required class="w-full px-4 py-2.5 rounded-xl border bg-gray-50 outline-none focus:ring-2 focus:ring-blue-500">
            <input type="url" id="mapUrl" placeholder="üîó ‡∏•‡∏¥‡∏á‡∏Å‡πå Google Maps (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)" class="w-full px-4 py-2.5 rounded-xl border bg-gray-50 outline-none focus:ring-2 focus:ring-blue-500 text-sm">
            <textarea id="description" rows="3" placeholder="‡πÄ‡∏•‡πà‡∏≤‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏£‡∏≤‡∏ß‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà..." class="w-full px-4 py-2.5 rounded-xl border bg-gray-50 outline-none focus:ring-2 focus:ring-blue-500"></textarea>
            <input type="text" id="userName" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì" required class="w-full px-4 py-2.5 rounded-xl border bg-gray-50 outline-none focus:ring-2 focus:ring-blue-500">
            <div class="bg-blue-50 p-3 rounded-2xl border border-blue-100 text-center">
                <label class="block text-[10px] font-bold text-blue-500 uppercase mb-1">‡∏£‡∏´‡∏±‡∏™ PIN 4 ‡∏´‡∏•‡∏±‡∏Å (‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç/‡∏•‡∏ö)</label>
                <input type="password" id="userPin" maxlength="4" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required class="w-full px-4 py-2 rounded-xl border-none text-center text-xl tracking-[1em] font-bold focus:ring-2 focus:ring-blue-400">
            </div>
            
            <div class="p-4 border-2 border-dashed border-gray-200 rounded-2xl bg-gray-50 text-center relative">
                <input type="file" id="photo" accept="image/*" multiple class="hidden">
                <label for="photo" id="fileLabel" class="cursor-pointer text-xs text-gray-500 font-medium italic">üì∑ ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û (‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 5 ‡∏£‡∏π‡∏õ)</label>
                
                <div id="imagePreviewContainer" class="preview-grid"></div>
                <button type="button" id="btnRemoveImg" onclick="removeImage()" class="hidden w-full text-[10px] text-red-500 mt-2 font-bold uppercase">‚úï ‡∏•‡πâ‡∏≤‡∏á‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
            </div>
            
            <button type="button" onclick="handleUpload()" id="btnSubmit" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 rounded-2xl shadow-lg transition-all active:scale-95">‡πÇ‡∏û‡∏™‡∏ï‡πå‡πÄ‡∏•‡∏¢ üöÄ</button>
            
            <div class="pt-1">
                <button type="button" onclick="openFeedback()" class="w-full bg-amber-50 border-2 border-dashed border-amber-200 text-amber-600 font-bold py-3 rounded-2xl flex items-center justify-center gap-2 hover:bg-amber-100 transition-all text-sm">
                    <span>üí°</span>
                    <span>‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå / ‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤</span>
                </button>
            </div>

            <button type="button" id="btnCancel" onclick="cancelEdit()" class="hidden w-full text-gray-500 text-sm font-medium mt-2 hover:text-red-500 transition-colors">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
          </form>
          <div id="loader" class="hidden mt-4 text-center text-blue-600 animate-bounce text-sm font-bold">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</div>
        </div>
      </div>

      <div class="lg:col-span-3">
        <div class="mb-8 bg-white p-6 rounded-3xl shadow-sm border border-gray-100 flex flex-col md:flex-row gap-4 items-center">
            <div class="relative w-full md:w-1/3">
                <span class="absolute left-4 top-3 text-gray-400">üîç</span>
                <input type="text" id="searchInput" oninput="filterPosts()" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î ‡∏´‡∏£‡∏∑‡∏≠‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà..." class="w-full pl-10 pr-4 py-2.5 rounded-2xl border bg-gray-50 outline-none focus:ring-2 focus:ring-blue-400 text-sm">
            </div>
            <div class="flex gap-2 w-full md:w-auto overflow-x-auto pb-2 md:pb-0">
                <button onclick="setFilterType('‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î')" class="filter-btn filter-active whitespace-nowrap px-5 py-2 rounded-full border text-xs font-bold transition-all">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
                <button onclick="setFilterType('‡∏ó‡∏µ‡πà‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß')" class="filter-btn whitespace-nowrap px-5 py-2 rounded-full border bg-white text-gray-500 text-xs font-bold transition-all">üèûÔ∏è ‡∏ó‡∏µ‡πà‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß</button>
                <button onclick="setFilterType('‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å')" class="filter-btn whitespace-nowrap px-5 py-2 rounded-full border bg-white text-gray-500 text-xs font-bold transition-all">üè® ‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å</button>
                <button onclick="setFilterType('‡∏Ñ‡∏≤‡πÄ‡∏ü‡πà/‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£')" class="filter-btn whitespace-nowrap px-5 py-2 rounded-full border bg-white text-gray-500 text-xs font-bold transition-all">‚òï ‡∏Ñ‡∏≤‡πÄ‡∏ü‡πà</button>
            </div>
        </div>
        <div id="postContainer" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-8"></div>
        <div id="noResults" class="hidden text-center py-20 text-gray-400 italic text-lg">üòî ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£...</div>
      </div>
    </div>
  </div>

  <button onclick="toggleForm()" class="lg:hidden fixed bottom-6 right-6 bg-blue-600 text-white px-5 py-3 rounded-full shadow-2xl flex items-center gap-2 z-[140] hover:scale-105 active:scale-95 transition-all animate-bounce-short">
    <span class="text-xl">‚úçÔ∏è</span>
    <span class="font-bold tracking-wide">‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏û‡∏™‡∏ï‡πå</span>
  </button>

  <div id="detailModal" class="hidden fixed inset-0 z-[100] bg-black/90 flex items-center justify-center p-4 backdrop-blur-sm">
      <div class="bg-white w-full max-w-4xl max-h-[90vh] rounded-3xl overflow-hidden relative shadow-2xl flex flex-col md:flex-row">
          <button onclick="closeModal()" class="absolute top-4 right-4 bg-black/50 text-white w-10 h-10 rounded-full z-20 hover:bg-black transition-all">‚úï</button>
          <div id="modalImages" class="md:w-1/2 bg-gray-100 p-2 overflow-y-auto h-[300px] md:h-auto border-r flex flex-col gap-2"></div>
          <div class="md:w-1/2 p-8 overflow-y-auto flex flex-col justify-between h-[400px] md:h-auto text-left">
              <div>
                  <div class="flex gap-2 mb-4">
                      <span id="modalProvince" class="bg-blue-100 text-blue-600 px-3 py-1 rounded-full text-xs font-bold"></span>
                      <span id="modalType" class="bg-blue-600 text-white px-3 py-1 rounded-full text-xs font-bold"></span>
                  </div>
                  <h2 id="modalTitle" class="text-3xl font-bold text-gray-800 mb-4 leading-tight"></h2>
                  <p id="modalDesc" class="text-gray-600 leading-relaxed whitespace-pre-wrap text-base"></p>
              </div>
              <div class="border-t pt-6 mt-6">
                  <p id="modalUser" class="text-sm text-gray-400 mb-4 font-semibold italic"></p>
                  <div id="modalMapBtn"></div>
              </div>
          </div>
      </div>
  </div>

  <div id="feedbackModal" class="hidden fixed inset-0 z-[200] bg-black/60 flex items-center justify-center p-4 backdrop-blur-sm">
      <div class="bg-white w-full max-w-md rounded-3xl shadow-2xl overflow-hidden">
          <div class="bg-amber-500 p-6 text-white text-center">
              <h3 class="text-xl font-bold">üí° ‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÉ‡∏´‡∏°‡πà</h3>
              <p class="text-sm opacity-90">‡∏ö‡∏≠‡∏Å‡πÄ‡∏£‡∏≤‡∏ß‡πà‡∏≤‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏¢‡∏≤‡∏Å‡πÉ‡∏´‡πâ Travel Pro ‡∏°‡∏µ‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°!</p>
          </div>
          <div class="p-6 space-y-4">
              <input type="text" id="fbUser" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì" class="w-full px-4 py-2.5 rounded-xl border bg-gray-50 outline-none focus:ring-2 focus:ring-amber-500">
              <textarea id="fbContent" rows="4" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞‡∏´‡∏£‡∏∑‡∏≠‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏≤‡∏Å‡πÑ‡∏î‡πâ..." class="w-full px-4 py-2.5 rounded-xl border bg-gray-50 outline-none focus:ring-2 focus:ring-amber-500"></textarea>
              <div class="flex gap-2">
                  <button onclick="closeFeedback()" class="flex-1 bg-gray-200 text-gray-600 font-bold py-3 rounded-xl hover:bg-gray-300 transition-all">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                  <button onclick="sendFeedback()" id="btnFbSubmit" class="flex-1 bg-amber-500 text-white font-bold py-3 rounded-xl hover:bg-amber-600 transition-all">‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• üöÄ</button>
              </div>
          </div>
      </div>
  </div>

  <script>
    const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbxnOhkuabchx0o78XH9pC9AO77m6NaXfOEg_ZTwGfYaSlqO4lAjw7GgOM9NeFahvsnV/exec"; 
    let isEditMode = false;
    let currentEditId = null;
    let allPosts = [];
    let currentFilterType = "‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î";

    function toggleForm() {
        const wrapper = document.getElementById('formWrapper');
        wrapper.classList.toggle('active');
        if (wrapper.classList.contains('active')) {
            document.body.classList.add('modal-open');
        } else {
            document.body.classList.remove('modal-open');
        }
    }

    function formatDate(dateString) {
      if (!dateString) return "‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà";
      const date = new Date(dateString);
      return date.toLocaleDateString('th-TH', { day: 'numeric', month: 'short', year: 'numeric' });
    }

    function getImgUrl(rawUrl) {
      if(!rawUrl) return 'https://via.placeholder.com/400x300';
      const fileId = rawUrl.split('id=')[1]?.split('&')[0] || rawUrl.split('/d/')[1]?.split('/')[0];
      return fileId ? `https://drive.google.com/thumbnail?id=${fileId}&sz=w800` : 'https://via.placeholder.com/400x300';
    }

    function showSkeleton() {
      const container = document.getElementById('postContainer');
      container.innerHTML = '';
      for(let i=0; i<6; i++) {
        container.innerHTML += `
          <div class="bg-white rounded-[1.5rem] border border-gray-100 overflow-hidden shadow-sm">
            <div class="h-56 skeleton"></div>
            <div class="p-5 space-y-4">
              <div class="h-6 skeleton w-3/4"></div>
              <div class="h-4 skeleton w-full"></div>
              <div class="flex justify-between pt-4">
                <div class="h-4 skeleton w-1/4"></div>
                <div class="h-4 skeleton w-1/4"></div>
              </div>
            </div>
          </div>`;
      }
    }

    async function loadPosts() {
      showSkeleton();
      try {
        const response = await fetch(`${WEB_APP_URL}?action=getPosts`);
        allPosts = await response.json();
        renderPosts(allPosts);
      } catch (e) { document.getElementById('postContainer').innerHTML = "‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà"; }
    }

    function renderPosts(posts) {
      const container = document.getElementById('postContainer');
      const noResults = document.getElementById('noResults');
      container.innerHTML = ''; 
      if (posts.length === 0) { noResults.classList.remove('hidden'); return; }
      noResults.classList.add('hidden');

      posts.forEach((post) => {
        const images = post.imageUrl.split(',').filter(url => url.trim() !== '');
        const firstImg = images[0];
        const photoCount = images.length;
        
        const isHot = post.likes >= 10;
        const postDate = new Date(post.date);
        const isNew = (new Date() - postDate) < (24 * 60 * 60 * 1000);

        container.innerHTML += `
          <div class="post-card bg-white relative border border-gray-100 flex flex-col text-left" onclick='openModal(${JSON.stringify(post).replace(/'/g, "&apos;")})'>
            
            <div class="absolute top-3 right-3 flex flex-col gap-1 z-20 items-end">
                ${isHot ? `<span class="bg-orange-500 text-white px-3 py-1 rounded-full text-[10px] font-bold shadow-lg animate-pulse">üî• ‡∏¢‡∏≠‡∏î‡∏Æ‡∏¥‡∏ï</span>` : ''}
                ${isNew ? `<span class="bg-green-500 text-white px-3 py-1 rounded-full text-[10px] font-bold shadow-lg">‚ú® ‡∏°‡∏≤‡πÉ‡∏´‡∏°‡πà</span>` : ''}
                ${photoCount > 1 ? `
                  <span class="bg-orange-600/90 backdrop-blur text-white px-2 py-1 rounded-lg text-[9px] font-bold flex items-center gap-1 shadow-lg border border-white/20">
                    üñºÔ∏è +${photoCount - 1} ‡∏£‡∏π‡∏õ
                  </span>
                ` : ''}
            </div>

            <div class="absolute top-3 left-3 flex gap-1 z-10">
              <span class="bg-white/90 backdrop-blur px-3 py-1 rounded-full text-[10px] font-bold shadow-sm text-blue-600">üè† ${post.category}</span>
              <span class="bg-blue-600 text-white px-3 py-1 rounded-full text-[10px] font-bold shadow-sm">${post.placeType || '‡∏ó‡∏µ‡πà‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß'}</span>
            </div>
            
            <div class="h-56 bg-gray-100 overflow-hidden relative">
              <img src="${getImgUrl(firstImg)}" class="w-full h-full object-cover">
            </div>

            <div class="p-5 flex-grow text-left">
              <div class="flex justify-between items-start mb-2">
                  <h4 class="font-bold text-xl text-gray-800">${post.placeName}</h4>
                  <div class="flex items-center gap-3">
                    <button onclick="event.stopPropagation(); likePost('${post.rowId}')" class="text-red-500 text-sm">‚ù§Ô∏è <span id="like-count-${post.rowId}">${post.likes}</span></button>
                    <button onclick="event.stopPropagation(); sharePost('${post.placeName}', '${post.category}')" class="text-gray-400 hover:text-blue-500 text-sm">üîó ‡πÅ‡∏ä‡∏£‡πå</button>
                  </div>
              </div>
              <p class="text-gray-500 text-sm mb-4 line-clamp-2">${post.description}</p>
              
              <div class="flex items-center justify-between border-t pt-4">
                <div class="flex flex-col">
                  <span class="text-[10px] font-semibold text-gray-400">üë§ ${post.userName}</span>
                  <span class="text-[9px] text-gray-300">üìÖ ${formatDate(post.date)}</span>
                </div>
                <div class="flex gap-3">
                    <button onclick="event.stopPropagation(); editPost('${post.rowId}', '${post.placeName}', '${post.description}', '${post.userName}', '${post.category}', '${post.mapUrl || ''}', '${post.placeType || '‡∏ó‡∏µ‡πà‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß'}')" class="text-blue-500 text-[10px] font-bold">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                    <button onclick="event.stopPropagation(); deletePost('${post.rowId}')" class="text-red-400 text-[10px] font-bold">‡∏•‡∏ö</button>
                </div>
              </div>
            </div>
          </div>`;
      });
    }

    async function sharePost(title, province) {
        const url = window.location.href;
        if (navigator.share) {
            navigator.share({ title: `Travel Pro: ${title}`, text: `‡πÑ‡∏õ‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß‡∏ó‡∏µ‡πà ${title} (‡∏à.${province}) ‡∏Å‡∏±‡∏ô‡πÑ‡∏´‡∏°?`, url });
        } else {
            navigator.clipboard.writeText(url);
            alert("üìã ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢!");
        }
    }

    async function likePost(id) { 
        const countSpan = document.getElementById(`like-count-${id}`);
        if(countSpan) countSpan.innerText = parseInt(countSpan.innerText) + 1;
        await fetch(`${WEB_APP_URL}?action=like&id=${id}`); 
    }

    function setFilterType(type) {
        currentFilterType = type;
        document.querySelectorAll('.filter-btn').forEach(btn => {
            if (btn.innerText.includes(type)) btn.classList.add('filter-active');
            else btn.classList.remove('filter-active');
        });
        filterPosts();
    }

    function filterPosts() {
        const searchText = document.getElementById('searchInput').value.toLowerCase();
        const filtered = allPosts.filter(post => {
            const matchesSearch = post.placeName.toLowerCase().includes(searchText) || post.category.toLowerCase().includes(searchText);
            const matchesType = (currentFilterType === "‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î") || (post.placeType === currentFilterType);
            return matchesSearch && matchesType;
        });
        renderPosts(filtered);
    }

    function openModal(post) {
        document.getElementById('modalTitle').innerText = post.placeName;
        document.getElementById('modalDesc').innerText = post.description;
        document.getElementById('modalProvince').innerText = post.category;
        document.getElementById('modalType').innerText = post.placeType || "‡∏ó‡∏µ‡πà‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß";
        document.getElementById('modalUser').innerText = "üìç ‡πÇ‡∏û‡∏™‡∏ï‡πå‡πÇ‡∏î‡∏¢: " + post.userName + " | üìÖ " + formatDate(post.date);
        
        const imgDiv = document.getElementById('modalImages');
        imgDiv.innerHTML = '';
        const urls = post.imageUrl.split(',').filter(url => url.trim() !== '');
        
        urls.forEach((url, index) => {
            imgDiv.innerHTML += `
                <div class="relative">
                    <img src="${getImgUrl(url)}" class="w-full rounded-xl shadow-sm object-contain bg-white">
                    <div class="absolute top-4 right-4 bg-black/60 text-white px-3 py-1 rounded-full text-xs font-bold backdrop-blur-sm">
                        üì∏ ‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà ${index + 1} / ${urls.length}
                    </div>
                </div>`;
        });
        
        const mapBtn = document.getElementById('modalMapBtn');
        mapBtn.innerHTML = post.mapUrl ? `<a href="${post.mapUrl}" target="_blank" class="w-full text-center block bg-green-500 text-white py-3 rounded-2xl font-bold hover:bg-green-600 transition-colors">üìç ‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà Google Maps</a>` : '';
        document.getElementById('detailModal').classList.remove('hidden');
        document.body.classList.add('modal-open');
    }

    function closeModal() {
        document.getElementById('detailModal').classList.add('hidden');
        document.body.classList.remove('modal-open');
    }

    async function handleUpload() {
      const btn = document.getElementById('btnSubmit');
      const loader = document.getElementById('loader');
      const fileInput = document.getElementById('photo');
      const pin = document.getElementById('userPin').value;
      if (pin.length < 4) { alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà PIN 4 ‡∏´‡∏•‡∏±‡∏Å"); return; }
      if (!isEditMode && fileInput.files.length === 0) { alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏£‡∏π‡∏õ"); return; }
      
      btn.disabled = true; loader.classList.remove('hidden');
      
      let photosArray = [];
      const files = fileInput.files;
      
      for (let i = 0; i < files.length; i++) {
          const file = files[i];
          const pData = await new Promise(resolve => {
              const reader = new FileReader();
              reader.onload = e => resolve({ 
                  type: file.type, 
                  contents: e.target.result.split(',')[1], 
                  name: file.name 
              });
              reader.readAsDataURL(file);
          });
          photosArray.push(pData);
      }

      const obj = {
        action: isEditMode ? "updateFull" : "upload",
        rowId: currentEditId,
        category: document.getElementById('category').value,
        placeType: document.getElementById('placeType').value,
        placeName: document.getElementById('placeName').value,
        description: document.getElementById('description').value,
        mapUrl: document.getElementById('mapUrl').value,
        userName: document.getElementById('userName').value,
        userPin: pin,
        photos: photosArray 
      };

      try {
        await fetch(WEB_APP_URL, { method: "POST", mode: "no-cors", body: JSON.stringify(obj) });
        alert(isEditMode ? "‚úÖ ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!" : "üéâ ‡πÇ‡∏û‡∏™‡∏ï‡πå‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢!");
        cancelEdit();
        setTimeout(loadPosts, 1500);
      } catch (e) { alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•"); }
      finally { btn.disabled = false; loader.classList.add('hidden'); }
    }

    document.getElementById('photo').onchange = function() {
        const files = this.files;
        const container = document.getElementById('imagePreviewContainer');
        container.innerHTML = ''; 
        
        if (files.length > 5) {
            alert("‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 5 ‡∏£‡∏π‡∏õ‡∏Ñ‡∏£‡∏±‡∏ö");
            this.value = "";
            return;
        }

        if (files.length > 0) {
            document.getElementById('fileLabel').innerText = "üéØ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß " + files.length + " ‡∏£‡∏π‡∏õ";
            container.style.display = 'grid';
            document.getElementById('btnRemoveImg').classList.remove('hidden');

            Array.from(files).forEach(file => {
                const reader = new FileReader();
                reader.onload = e => {
                    const img = document.createElement('img');
                    img.src = e.target.result;
                    container.appendChild(img);
                }
                reader.readAsDataURL(file);
            });
        }
    };

    function removeImage() {
        document.getElementById('photo').value = "";
        document.getElementById('fileLabel').innerText = "üì∑ ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û (‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 5 ‡∏£‡∏π‡∏õ)";
        document.getElementById('imagePreviewContainer').style.display = 'none';
        document.getElementById('imagePreviewContainer').innerHTML = "";
        document.getElementById('btnRemoveImg').classList.add('hidden');
    }

    async function editPost(id, name, desc, user, cate, map, type) {
        const pin = prompt("üîê ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô PIN 4 ‡∏´‡∏•‡∏±‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏ô‡∏µ‡πâ:");
        if (!pin) return;
        const check = await fetch(`${WEB_APP_URL}?action=checkPin&id=${id}&pin=${pin}`);
        if ((await check.text()) === "Valid") {
            isEditMode = true;
            currentEditId = id;
            document.getElementById('placeName').value = name;
            document.getElementById('description').value = desc;
            document.getElementById('userName').value = user;
            document.getElementById('category').value = cate;
            document.getElementById('mapUrl').value = map;
            document.getElementById('placeType').value = type;
            document.getElementById('userPin').value = pin;
            if (window.innerWidth < 1024) toggleForm();
            const formBox = document.getElementById('formContainer');
            formBox.classList.add('edit-mode-active', 'edit-shake');
            document.getElementById('formTitle').innerText = "‚úèÔ∏è ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÇ‡∏û‡∏™‡∏ï‡πå...";
            document.getElementById('btnSubmit').innerText = "üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á";
            document.getElementById('btnCancel').classList.remove('hidden');
            window.scrollTo({ top: 0, behavior: 'smooth' });
            setTimeout(() => formBox.classList.remove('edit-shake'), 1000);
        } else { alert("‚ùå PIN ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á"); }
    }

    function cancelEdit() {
        isEditMode = false;
        currentEditId = null;
        document.getElementById('travelForm').reset();
        removeImage();
        document.getElementById('formContainer').classList.remove('edit-mode-active');
        document.getElementById('formTitle').innerText = "‚úçÔ∏è ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏û‡∏™‡∏ï‡πå‡πÉ‡∏´‡∏°‡πà";
        document.getElementById('btnSubmit').innerText = "‡πÇ‡∏û‡∏™‡∏ï‡πå‡πÄ‡∏•‡∏¢ üöÄ";
        document.getElementById('btnCancel').classList.add('hidden');
        if (window.innerWidth < 1024) {
            document.getElementById('formWrapper').classList.remove('active');
            document.body.classList.remove('modal-open');
        }
    }

    async function deletePost(id) {
        const pass = prompt("‡∏£‡∏´‡∏±‡∏™ Admin ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏•‡∏ö:");
        if (!pass) return;
        const resp = await fetch(`${WEB_APP_URL}?action=delete&id=${id}&pass=${pass}`);
        const result = await resp.text();
        if (result === "Deleted") { alert("‡∏•‡∏ö‡πÇ‡∏û‡∏™‡∏ï‡πå‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢"); loadPosts(); } 
        else if (result === "Wrong Password") { alert("‡∏£‡∏´‡∏±‡∏™ Admin ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á"); } 
        else { alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î"); }
    }
    
    function openFeedback() {
        document.getElementById('feedbackModal').classList.remove('hidden');
        document.body.classList.add('modal-open');
    }
    function closeFeedback() {
        document.getElementById('feedbackModal').classList.add('hidden');
        document.body.classList.remove('modal-open');
        document.getElementById('fbContent').value = '';
    }
    async function sendFeedback() {
        const user = document.getElementById('fbUser').value;
        const content = document.getElementById('fbContent').value;
        const btn = document.getElementById('btnFbSubmit');
        if (!content) { alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö"); return; }
        btn.disabled = true; btn.innerText = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á...";
        try {
            await fetch(WEB_APP_URL, {
                method: "POST", mode: "no-cors",
                body: JSON.stringify({ action: "feedback", userName: user || "‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠", description: content })
            });
            alert("‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞! ‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏£‡∏±‡∏ö");
            closeFeedback();
        } catch (e) { alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà"); }
        finally { btn.disabled = false; btn.innerText = "‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• üöÄ"; }
    }
    window.onload = loadPosts;
  </script>
</body>
</html>