<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>‡πÇ‡∏≠‡πÄ‡∏Ñ ‡πÇ‡∏°‡∏ö‡∏≤‡∏¢ | ‡∏£‡πâ‡∏≤‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠</title>
    <!-- TailwindCSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Papa Parse -->
    <script src="cdn.jsdelivr.net"></script>
    <style>
        @import url('fonts.googleapis.com');
        .font-prompt {
            font-family: 'Prompt', sans-serif;
        }
        @layer utilities {
            .text-primary { color: #4f46e5; }
            .text-secondary { color: #ec4899; }
            .bg-primary { background-color: #4f46e5; }
            .bg-secondary { background-color: #ec4899; }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-indigo-100 via-purple-100 to-pink-100 text-gray-800 font-prompt min-h-screen">

    <!-- Header -->
    <header class="bg-gradient-to-r from-pink-500 via-red-500 to-yellow-500 shadow-xl p-8 text-center rounded-b-3xl sticky top-0 z-10 relative">
        <h1 class="text-6xl font-extrabold text-white drop-shadow-2xl tracking-wide">
            ‡πÇ‡∏≠‡πÄ‡∏Ñ ‡πÇ‡∏°‡∏ö‡∏≤‡∏¢
        </h1>
        <p class="text-gray-100 mt-2 text-xl font-medium drop-shadow-lg">
            üì± OK-MOBILE SHOP ONLINE | ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û ‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏±‡∏ô‡πÄ‡∏≠‡∏á
        </p>
    </header>

    <div class="p-6 max-w-6xl mx-auto">
        
        <!-- ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏ä‡πá‡∏Ñ‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô & ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å -->
        <div class="flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-4 my-6">
            <a href="warranty.html" class="inline-flex items-center justify-center bg-blue-600 text-white px-8 py-3 rounded-full shadow-lg hover:bg-blue-700 transition-transform transform hover:scale-105 font-semibold text-lg">
                üîç ‡πÄ‡∏ä‡πá‡∏Ñ‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
            </a>
            <a href="index.html" class="inline-flex items-center justify-center bg-gray-600 text-white px-8 py-3 rounded-full shadow-lg hover:bg-gray-700 transition-transform transform hover:scale-105 font-semibold text-lg">
                üè† ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å
            </a>
        </div>

        <!-- Search & Sort -->
        <div class="flex flex-col md:flex-row gap-4 mb-8 mt-6 items-center">
            <input type="text" id="product-search" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (‡πÄ‡∏ä‡πà‡∏ô iPhone, Samsung, Xiaomi)"
                   class="w-full md:w-2/3 p-4 border-2 border-pink-400 rounded-xl shadow-inner text-lg focus:ring-4 focus:ring-pink-300 transition duration-300">
            
            <select id="product-sort" class="w-full md:w-1/3 p-4 border-2 border-pink-400 rounded-xl shadow-inner text-lg bg-white appearance-none cursor-pointer focus:ring-4 focus:ring-pink-300 transition duration-300">
                <option value="default">‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô)</option>
                <option value="price-asc">‡∏£‡∏≤‡∏Ñ‡∏≤: ‡∏ô‡πâ‡∏≠‡∏¢‡πÑ‡∏õ‡∏°‡∏≤‡∏Å (‚Üë)</option>
                <option value="price-desc">‡∏£‡∏≤‡∏Ñ‡∏≤: ‡∏°‡∏≤‡∏Å‡πÑ‡∏õ‡∏ô‡πâ‡∏≠‡∏¢ (‚Üì)</option>
            </select>
        </div>

        <h2 class="text-4xl font-bold text-gray-800 mb-6 border-b-4 border-pink-500 pb-2">
            ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡∏£‡πâ‡∏≤‡∏ô
        </h2>
        
        <div id="product-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
            <p id="loading" class="text-gray-500 text-center col-span-full py-10 text-xl animate-pulse">
                ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤... ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà
            </p>
        </div>
    </div>

    <footer class="mt-12 p-6 bg-pink-500 text-white text-center rounded-t-3xl shadow-inner">
        <p>¬© 2025 OK-MOBILE Shop Online. ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏î‡πâ‡∏ß‡∏¢‡πÉ‡∏à ‡πÉ‡∏™‡πà‡πÉ‡∏à‡∏ó‡∏∏‡∏Å‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</p>
    </footer>

    <script type="module">
        let allProducts = [];
        const csvUrl = 'docs.google.com';
        const grid = document.getElementById('product-grid');
        const loading = document.getElementById('loading');
        const searchInput = document.getElementById('product-search');
        const sortInput = document.getElementById('product-sort');

        const formatPrice = (price) => Number(price).toLocaleString('th-TH');

        const renderProducts = (products) => {
            grid.innerHTML = ''; 

            if (products.length === 0) {
                grid.innerHTML = '<div class="col-span-full text-center py-10"><p class="text-2xl text-red-500 font-semibold">‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</p></div>';
                return;
            }

            products.forEach(item => {
                const name = item.name?.trim() || '‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤';
                const price = item.price?.trim() || '0';
                const image = item.image?.trim() || 'placehold.co'; 
                const facebook = item.facebook?.trim() || 'www.facebook.com'; 

                const card = document.createElement('div');
                card.className = `bg-white p-6 rounded-3xl shadow-xl hover:shadow-2xl transition duration-300 transform hover:-translate-y-1 border border-gray-100 flex flex-col justify-between`;
                
                card.innerHTML = `
                    <div>
                        <div class="h-64 mb-4 overflow-hidden rounded-xl">
                            <img src="${image}" alt="${name}" class="w-full h-full object-cover transition-transform duration-500 hover:scale-105" onerror="this.src='placehold.co'">
                        </div>
                        <!-- ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏™‡πà‡∏ß‡∏ô‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ: ‡πÉ‡∏ä‡πâ break-words ‡πÅ‡∏•‡∏∞ line-clamp -->
                        <h3 class="text-xl font-bold mb-2 text-gray-900 leading-tight break-words line-clamp-2 min-h-[3.5rem]">
                            ${name}
                        </h3>
                        <p class="text-3xl font-extrabold mb-4 text-pink-600">
                            <span class="text-2xl font-normal">‡∏ø</span>${formatPrice(price)}
                        </p>
                    </div>
                    <div class="flex flex-col space-y-3 mt-auto">
                        <a href="${facebook}" target="_blank" class="w-full text-center bg-pink-500 text-white px-4 py-3 rounded-full text-lg font-semibold hover:bg-pink-600 transition shadow-md">
                            üîó ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
                        </a>
                        <a href="${facebook}" target="_blank" class="w-full text-center bg-green-500 text-white px-4 py-3 rounded-full text-lg font-semibold hover:bg-green-600 transition shadow-md">
                            üõí ‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
                        </a>
                    </div>
                `;
                grid.appendChild(card);
            });
        };

        // Fetch Data
        Papa.parse(csvUrl, {
            download: true,
            header: true,
            complete: (results) => {
                allProducts = results.data.filter(item => item.name); // ‡∏Å‡∏£‡∏≠‡∏á‡πÅ‡∏ñ‡∏ß‡∏ß‡πà‡∏≤‡∏á
                renderProducts(allProducts);
            }
        });

        // Search & Filter Event
        const handleFilter = () => {
            let filtered = allProducts.filter(p => p.name.toLowerCase().includes(searchInput.value.toLowerCase()));
            if (sortInput.value === 'price-asc') filtered.sort((a, b) => Number(a.price) - Number(b.price));
            if (sortInput.value === 'price-desc') filtered.sort((a, b) => Number(b.price) - Number(a.price));
            renderProducts(filtered);
        };

        searchInput.addEventListener('input', handleFilter);
        sortInput.addEventListener('change', handleFilter);
    </script>
</body>
</html>
