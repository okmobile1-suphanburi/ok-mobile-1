<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô - ‡∏Ñ‡∏ô‡∏•‡∏∞‡∏Ñ‡∏£‡∏∂‡πà‡∏á‡∏û‡∏•‡∏±‡∏™ (‡∏´‡∏•‡∏≤‡∏¢‡∏Ñ‡∏ô)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            box-sizing: border-box;
        }
        
        @font-face {
            font-family: 'Sarabun';
            src: url('https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700&display=swap');
        }
        
        body {
            font-family: 'Sarabun', sans-serif;
        }
        
        .receipt-paper {
            width: 80mm;
            background: white;
            padding: 10mm;
            font-size: 12px;
            line-height: 1.4;
            color: black;
        }
        
        @media print {
            body * {
                visibility: hidden;
            }
            .receipt-paper, .receipt-paper * {
                visibility: visible;
            }
            .receipt-paper {
                position: absolute;
                left: 0;
                top: 0;
                width: 80mm !important;
                margin: 0;
                padding: 5mm;
                box-shadow: none;
            }
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .card-shadow {
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        
        .progress-bar {
            transition: width 0.5s ease-in-out;
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }
        
        .modal-content {
            background-color: white;
            margin: 15% auto;
            padding: 20px;
            border-radius: 10px;
            width: 90%;
            max-width: 500px;
        }
        
        .member-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .member-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .member-card.active {
            border: 2px solid #3B82F6;
            background: linear-gradient(135deg, #EBF4FF 0%, #DBEAFE 100%);
        }
        
        .backup-reminder {
            animation: pulse 2s infinite;
        }
    </style>
</head>
<body class="min-h-full bg-gray-50">
    <header class="gradient-bg text-white py-6">
        <div class="container mx-auto px-4">
            <h1 class="text-3xl font-bold text-center">‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô</h1>
            <p class="text-center mt-2 text-blue-100">‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ô‡∏•‡∏∞‡∏Ñ‡∏£‡∏∂‡πà‡∏á‡∏û‡∏•‡∏±‡∏™ (‡∏´‡∏•‡∏≤‡∏¢‡∏Ñ‡∏ô)</p>
        </div>
    </header>

    <main class="container mx-auto px-4 py-8">
        <!-- ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• -->
        <div id="backupReminder" class="bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6 backup-reminder" style="display: none;">
            <div class="flex items-center">
                <div class="flex-shrink-0">
                    <span class="text-yellow-400 text-xl">‚ö†Ô∏è</span>
                </div>
                <div class="ml-3 flex-1">
                    <p class="text-sm text-yellow-700">
                        <strong>‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•!</strong> ‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å <span id="memberCount">0</span> ‡∏Ñ‡∏ô 
                        ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏π‡∏ç‡∏´‡∏≤‡∏¢
                    </p>
                </div>
                <div class="ml-3">
                    <button onclick="exportData()" class="bg-yellow-500 text-white px-3 py-1 rounded text-sm hover:bg-yellow-600">
                        ‡∏™‡∏≥‡∏£‡∏≠‡∏á‡πÄ‡∏•‡∏¢
                    </button>
                    <button onclick="hideBackupReminder()" class="ml-2 text-yellow-700 hover:text-yellow-900 text-sm">
                        ‚úï
                    </button>
                </div>
            </div>
        </div>

        <!-- ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å -->
        <div class="bg-white rounded-lg card-shadow p-6 mb-8">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-semibold text-gray-800">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</h2>
                <div class="flex gap-2 flex-wrap">
                    <button onclick="exportData()" class="bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-600 transition duration-300 text-sm">
                        üì• ‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                    </button>
                    <button onclick="showImportModal()" class="bg-orange-500 text-white px-4 py-2 rounded-md hover:bg-orange-600 transition duration-300 text-sm">
                        üì§ ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                    </button>
                    <button onclick="showAddMemberModal()" class="bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition duration-300">
                        + ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÉ‡∏´‡∏°‡πà
                    </button>
                </div>
            </div>
            
            <!-- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡∏£‡∏≠‡∏á -->
            <div class="bg-blue-50 p-4 rounded-lg mb-6">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm text-blue-800">
                            <strong>‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î:</strong> <span id="lastBackupTime">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Ñ‡∏¢‡∏™‡∏≥‡∏£‡∏≠‡∏á</span>
                        </p>
                        <p class="text-xs text-blue-600 mt-1">
                            üí° ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÉ‡∏´‡∏°‡πà‡∏´‡∏£‡∏∑‡∏≠‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç
                        </p>
                    </div>
                    <button onclick="autoBackup()" class="bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600">
                        ‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
                    </button>
                </div>
            </div>
            
            <!-- ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏á -->
            <div class="mb-6 space-y-4">
                <div class="flex flex-col md:flex-row gap-4">
                    <div class="flex-1">
                        <label for="searchMembers" class="block text-sm font-medium text-gray-700 mb-2">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</label>
                        <input type="text" id="searchMembers" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏ä‡∏∑‡πà‡∏≠, ‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£..." 
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                               oninput="filterMembers()">
                    </div>
                    <div class="md:w-48">
                        <label for="sortMembers" class="block text-sm font-medium text-gray-700 mb-2">‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏°</label>
                        <select id="sortMembers" onchange="filterMembers()" 
                                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="name">‡∏ä‡∏∑‡πà‡∏≠ A-Z</option>
                            <option value="progress">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤</option>
                            <option value="completed">‡∏Ñ‡∏£‡∏ö‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏Å‡πà‡∏≠‡∏ô</option>
                            <option value="recent">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</option>
                            <option value="amount">‡∏¢‡∏≠‡∏î‡∏≠‡∏≠‡∏°‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î</option>
                        </select>
                    </div>
                </div>
                
                <!-- ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å -->
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
                    <div class="bg-blue-50 p-3 rounded-lg">
                        <p class="text-sm text-gray-600">‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</p>
                        <p class="text-xl font-bold text-blue-600" id="totalMembers">0</p>
                    </div>
                    <div class="bg-green-50 p-3 rounded-lg">
                        <p class="text-sm text-gray-600">‡∏Ñ‡∏£‡∏ö‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢</p>
                        <p class="text-xl font-bold text-green-600" id="completedMembers">0</p>
                    </div>
                    <div class="bg-yellow-50 p-3 rounded-lg">
                        <p class="text-sm text-gray-600">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏≠‡∏≠‡∏°</p>
                        <p class="text-xl font-bold text-yellow-600" id="activeMembers">0</p>
                    </div>
                    <div class="bg-purple-50 p-3 rounded-lg">
                        <p class="text-sm text-gray-600">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</p>
                        <p class="text-lg font-bold text-purple-600" id="totalSavings">0</p>
                    </div>
                </div>
            </div>
            
            <div id="membersList" class="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
                <div class="text-center py-8 text-gray-500 col-span-full">
                    ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÉ‡∏´‡∏°‡πà" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
                </div>
            </div>
            
            <!-- ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ -->
            <div id="noResults" class="text-center py-8 text-gray-500 col-span-full" style="display: none;">
                ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
            </div>
        </div>

        <!-- ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏° -->
        <div class="bg-white rounded-lg card-shadow p-6 mb-8" id="savingsStatus" style="display: none;">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-2xl font-semibold text-gray-800">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô</h2>
                <div class="text-right">
                    <span id="currentMemberName" class="text-lg font-medium text-blue-600"></span>
                    <button onclick="deleteMember()" class="ml-4 text-red-500 hover:text-red-700 text-sm">
                        üóëÔ∏è ‡∏•‡∏ö‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å
                    </button>
                </div>
            </div>
            
            <div class="grid md:grid-cols-3 gap-4 mb-6">
                <div class="bg-blue-50 p-4 rounded-lg text-center">
                    <p class="text-sm text-gray-600">‡∏¢‡∏≠‡∏î‡∏≠‡∏≠‡∏°‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</p>
                    <p class="text-2xl font-bold text-blue-600" id="currentSavings">0</p>
                    <p class="text-sm text-gray-500">‡∏ö‡∏≤‡∏ó</p>
                </div>
                <div class="bg-green-50 p-4 rounded-lg text-center">
                    <p class="text-sm text-gray-600">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢</p>
                    <p class="text-2xl font-bold text-green-600" id="targetAmount">0</p>
                    <p class="text-sm text-gray-500">‡∏ö‡∏≤‡∏ó</p>
                </div>
                <div class="bg-purple-50 p-4 rounded-lg text-center">
                    <p class="text-sm text-gray-600">‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏≠‡∏µ‡∏Å</p>
                    <p class="text-2xl font-bold text-purple-600" id="remainingAmount">0</p>
                    <p class="text-sm text-gray-500">‡∏ö‡∏≤‡∏ó</p>
                </div>
            </div>
            
            <!-- Progress Bar -->
            <div class="w-full bg-gray-200 rounded-full h-4 mb-4">
                <div class="bg-gradient-to-r from-blue-500 to-purple-600 h-4 rounded-full progress-bar" id="progressBar" style="width: 0%"></div>
            </div>
            <p class="text-center text-sm text-gray-600" id="progressText">0% ‡∏Ç‡∏≠‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢</p>
        </div>

        <!-- ‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• -->
        <div class="bg-white rounded-lg card-shadow p-6 mb-8" id="savingsForm" style="display: none;">
            <h2 class="text-2xl font-semibold text-gray-800 mb-6">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô</h2>
            <form id="addSavingForm" class="space-y-4">
                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <label for="savingAmount" class="block text-sm font-medium text-gray-700 mb-2">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏≠‡∏° (‡∏ö‡∏≤‡∏ó)</label>
                        <input type="number" id="savingAmount" name="savingAmount" min="1" required 
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div>
                        <label for="targetPrice" class="block text-sm font-medium text-gray-700 mb-2">‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ (‡∏ö‡∏≤‡∏ó)</label>
                        <input type="number" id="targetPrice" name="targetPrice" min="1" 
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                </div>
                
                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <label for="scanDate" class="block text-sm font-medium text-gray-700 mb-2">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏™‡πÅ‡∏Å‡∏ô</label>
                        <input type="date" id="scanDate" name="scanDate" required 
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div>
                        <label for="scanTime" class="block text-sm font-medium text-gray-700 mb-2">‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏™‡πÅ‡∏Å‡∏ô</label>
                        <input type="time" id="scanTime" name="scanTime" required 
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                </div>
                
                <button type="submit" class="w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white py-3 px-6 rounded-md hover:from-blue-600 hover:to-purple-700 transition duration-300 font-medium">
                    ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°
                </button>
            </form>
        </div>

        <!-- ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏° -->
        <div class="bg-white rounded-lg card-shadow p-6 mb-8" id="historySection" style="display: none;">
            <h2 class="text-2xl font-semibold text-gray-800 mb-6">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô</h2>
            <div id="savingsHistory" class="space-y-4">
                <p class="text-gray-500 text-center py-8">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô</p>
            </div>
        </div>

        <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏û‡∏¥‡∏°‡∏û‡πå‡πÅ‡∏•‡∏∞‡πÅ‡∏ä‡∏£‡πå‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à -->
        <div class="text-center mb-8" id="printSection" style="display: none;">
            <div class="space-y-4">
                <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏û‡∏¥‡∏°‡∏û‡πå -->
                <div>
                    <h3 class="text-lg font-medium text-gray-800 mb-3">üìÑ ‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à</h3>
                    <div class="flex flex-col sm:flex-row gap-3 justify-center">
                        <button id="printLatestBtn" onclick="printLatestReceipt()" disabled 
                                class="bg-blue-500 text-white py-3 px-6 rounded-md hover:bg-blue-600 transition duration-300 font-medium disabled:bg-gray-400 disabled:cursor-not-allowed">
                            üìÑ ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
                        </button>
                        <button id="printAllBtn" onclick="printAllReceipt()" disabled 
                                class="bg-green-500 text-white py-3 px-6 rounded-md hover:bg-green-600 transition duration-300 font-medium disabled:bg-gray-400 disabled:cursor-not-allowed">
                            üìã ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                        </button>
                    </div>
                </div>
                
                <!-- ‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏ä‡∏£‡πå‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå -->
                <div>
                    <h3 class="text-lg font-medium text-gray-800 mb-3">üåê ‡πÅ‡∏ä‡∏£‡πå‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå</h3>
                    <div class="flex flex-col sm:flex-row gap-3 justify-center">
                        <button id="shareLatestBtn" onclick="shareLatestReceipt()" disabled 
                                class="bg-purple-500 text-white py-3 px-6 rounded-md hover:bg-purple-600 transition duration-300 font-medium disabled:bg-gray-400 disabled:cursor-not-allowed">
                            üì± ‡πÅ‡∏ä‡∏£‡πå‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
                        </button>
                        <button id="shareAllBtn" onclick="shareAllReceipt()" disabled 
                                class="bg-indigo-500 text-white py-3 px-6 rounded-md hover:bg-indigo-600 transition duration-300 font-medium disabled:bg-gray-400 disabled:cursor-not-allowed">
                            üìä ‡πÅ‡∏ä‡∏£‡πå‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                        </button>
                    </div>
                    <p class="text-sm text-gray-600 mt-2">‡πÅ‡∏ä‡∏£‡πå‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏ö‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡πà‡∏≤‡∏ô LINE, Facebook ‡∏´‡∏£‡∏∑‡∏≠ WhatsApp</p>
                </div>
            </div>
        </div>
    </main>

    <!-- Modal ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• -->
    <div id="importModal" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-semibold">‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏£‡∏≠‡∏á</h3>
                <button onclick="hideImportModal()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
            </div>
            
            <div class="space-y-4">
                <div>
                    <label for="importFile" class="block text-sm font-medium text-gray-700 mb-2">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (.json)</label>
                    <input type="file" id="importFile" accept=".json" 
                           class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                
                <div class="bg-yellow-50 p-4 rounded-lg">
                    <p class="text-sm text-yellow-800">
                        ‚ö†Ô∏è <strong>‡∏Ñ‡∏≥‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô:</strong> ‡∏Å‡∏≤‡∏£‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏∞‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏Å‡πà‡∏≠‡∏ô
                    </p>
                </div>
                
                <div class="flex gap-2">
                    <button onclick="importData()" class="flex-1 bg-orange-500 text-white py-3 px-6 rounded-md hover:bg-orange-600 transition duration-300 font-medium">
                        ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                    </button>
                    <button onclick="hideImportModal()" class="flex-1 bg-gray-500 text-white py-3 px-6 rounded-md hover:bg-gray-600 transition duration-300 font-medium">
                        ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÉ‡∏´‡∏°‡πà -->
    <div id="addMemberModal" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-semibold">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÉ‡∏´‡∏°‡πà</h3>
                <button onclick="hideAddMemberModal()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
            </div>
            
            <form id="newMemberForm" class="space-y-4">
                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <label for="newFirstName" class="block text-sm font-medium text-gray-700 mb-2">‡∏ä‡∏∑‡πà‡∏≠</label>
                        <input type="text" id="newFirstName" name="firstName" required 
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div>
                        <label for="newLastName" class="block text-sm font-medium text-gray-700 mb-2">‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</label>
                        <input type="text" id="newLastName" name="lastName" required 
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                </div>
                
                <div>
                    <label for="newPhoneNumber" class="block text-sm font-medium text-gray-700 mb-2">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</label>
                    <input type="tel" id="newPhoneNumber" name="phoneNumber" required 
                           class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                
                <div>
                    <label for="newProductDetails" class="block text-sm font-medium text-gray-700 mb-2">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ã‡∏∑‡πâ‡∏≠</label>
                    <textarea id="newProductDetails" name="productDetails" rows="3" required 
                              class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
                </div>
                
                <div>
                    <label for="newTargetPrice" class="block text-sm font-medium text-gray-700 mb-2">‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ (‡∏ö‡∏≤‡∏ó)</label>
                    <input type="number" id="newTargetPrice" name="targetPrice" min="1" required 
                           class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                
                <button type="submit" class="w-full bg-blue-500 text-white py-3 px-6 rounded-md hover:bg-blue-600 transition duration-300 font-medium">
                    ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å
                </button>
            </form>
        </div>
    </div>

    <!-- Modal ‡πÅ‡∏ä‡∏£‡πå‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à -->
    <div id="shareModal" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-semibold">‡πÅ‡∏ä‡∏£‡πå‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå</h3>
                <button onclick="hideShareModal()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
            </div>
            
            <div class="space-y-4">
                <!-- ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à -->
                <div class="bg-gray-50 p-4 rounded-lg border max-h-60 overflow-y-auto">
                    <div class="text-sm" id="sharePreview">
                        <!-- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÄ‡∏ï‡∏¥‡∏°‡∏î‡πâ‡∏ß‡∏¢ JavaScript -->
                    </div>
                </div>
                
                <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏î‡∏π‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à -->
                <div class="mb-4">
                    <button onclick="openReceiptInNewTab()" class="w-full bg-blue-500 text-white py-3 px-4 rounded-md hover:bg-blue-600 transition duration-300 font-medium text-lg">
                        üìÑ ‡∏î‡∏π‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏ö‡∏ö 80mm
                    </button>
                    <p class="text-sm text-gray-600 mt-2 text-center">‡∏Å‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡πÉ‡∏ô‡πÅ‡∏ó‡πá‡∏ö‡πÉ‡∏´‡∏°‡πà ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏õ‡∏∏‡πà‡∏°‡∏û‡∏¥‡∏°‡∏û‡πå</p>
                </div>
                
                <!-- ‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏ä‡∏£‡πå -->
                <div class="grid grid-cols-2 gap-3">
                    <button onclick="shareToLine()" class="bg-green-500 text-white py-3 px-4 rounded-md hover:bg-green-600 transition duration-300 font-medium">
                        üí¨ ‡πÅ‡∏ä‡∏£‡πå‡πÉ‡∏ô LINE
                    </button>
                    <button onclick="shareToFacebook()" class="bg-blue-600 text-white py-3 px-4 rounded-md hover:bg-blue-700 transition duration-300 font-medium">
                        üìò ‡πÅ‡∏ä‡∏£‡πå‡πÉ‡∏ô Facebook
                    </button>
                    <button onclick="copyReceiptText()" class="bg-gray-600 text-white py-3 px-4 rounded-md hover:bg-gray-700 transition duration-300 font-medium">
                        üìã ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
                    </button>
                    <button onclick="shareViaWhatsApp()" class="bg-green-600 text-white py-3 px-4 rounded-md hover:bg-green-700 transition duration-300 font-medium">
                        üì± ‡πÅ‡∏ä‡∏£‡πå‡πÉ‡∏ô WhatsApp
                    </button>
                </div>
                
                <div class="bg-blue-50 p-4 rounded-lg">
                    <p class="text-sm text-blue-800">
                        üí° <strong>‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö:</strong> ‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÅ‡∏ä‡∏£‡πå‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤‡∏ó‡∏µ‡πà‡∏≠‡πà‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢ ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡πà‡∏á‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡πÅ‡∏≠‡∏õ
                    </p>
                </div>
                
                <button onclick="hideShareModal()" class="w-full bg-gray-500 text-white py-3 px-6 rounded-md hover:bg-gray-600 transition duration-300 font-medium">
                    ‡∏õ‡∏¥‡∏î
                </button>
            </div>
        </div>
    </div>

    <!-- ‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à (‡∏ã‡πà‡∏≠‡∏ô‡πÑ‡∏ß‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡∏°‡∏û‡πå) -->
    <div id="receiptContent" class="receipt-paper" style="display: none;">
        <div class="text-center mb-4">
            <h3 class="font-bold text-lg">‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô</h3>
            <p class="text-sm">‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ô‡∏•‡∏∞‡∏Ñ‡∏£‡∏∂‡πà‡∏á‡∏û‡∏•‡∏±‡∏™</p>
            <p class="text-xs">================================</p>
        </div>
        
        <div id="receiptDetails" class="text-sm space-y-1">
            <!-- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÄ‡∏ï‡∏¥‡∏°‡∏î‡πâ‡∏ß‡∏¢ JavaScript -->
        </div>
        
        <div class="text-center mt-4">
            <p class="text-xs">================================</p>
            <p class="text-xs">‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</p>
            <p class="text-xs" id="receiptDateTime"></p>
        </div>
    </div>

    <script>
        let allMembers = {};
        let currentMemberId = null;

        // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å localStorage
        function loadData() {
            const saved = localStorage.getItem('allMembersData');
            if (saved) {
                allMembers = JSON.parse(saved);
                displayMembers();
                updateBackupInfo();
            }
        }

        // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏á localStorage
        function saveData() {
            localStorage.setItem('allMembersData', JSON.stringify(allMembers));
            updateBackupInfo();
        }

        // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡∏£‡∏≠‡∏á
        function updateBackupInfo() {
            const memberCount = Object.keys(allMembers).length;
            const lastBackup = localStorage.getItem('lastBackupTime');
            
            document.getElementById('memberCount').textContent = memberCount;
            
            if (lastBackup) {
                const backupDate = new Date(lastBackup);
                document.getElementById('lastBackupTime').textContent = 
                    backupDate.toLocaleDateString('th-TH') + ' ' + backupDate.toLocaleTimeString('th-TH');
            }
            
            // ‡πÅ‡∏™‡∏î‡∏á‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 3 ‡∏Ñ‡∏ô‡πÅ‡∏•‡∏∞‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Ñ‡∏¢‡∏™‡∏≥‡∏£‡∏≠‡∏á
            if (memberCount >= 3 && !lastBackup) {
                document.getElementById('backupReminder').style.display = 'block';
            }
        }

        // ‡∏ã‡πà‡∏≠‡∏ô‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏™‡∏≥‡∏£‡∏≠‡∏á
        function hideBackupReminder() {
            document.getElementById('backupReminder').style.display = 'none';
        }

        // ‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
        function exportData() {
            if (Object.keys(allMembers).length === 0) {
                alert('‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏™‡∏≥‡∏£‡∏≠‡∏á');
                return;
            }
            
            const dataToExport = {
                version: '1.0',
                exportDate: new Date().toISOString(),
                totalMembers: Object.keys(allMembers).length,
                data: allMembers
            };
            
            const dataStr = JSON.stringify(dataToExport, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            
            const link = document.createElement('a');
            link.href = URL.createObjectURL(dataBlob);
            
            const now = new Date();
            const dateStr = now.toISOString().split('T')[0];
            const timeStr = now.toTimeString().split(' ')[0].replace(/:/g, '-');
            link.download = `‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°_${dateStr}_${timeStr}.json`;
            
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏£‡∏≠‡∏á
            localStorage.setItem('lastBackupTime', new Date().toISOString());
            updateBackupInfo();
            hideBackupReminder();
            
            alert('‚úÖ ‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!\n\n‡πÑ‡∏ü‡∏•‡πå‡∏ñ‡∏π‡∏Å‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå Downloads\n‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ü‡∏•‡πå‡∏ô‡∏µ‡πâ‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢');
        }

        // ‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
        function autoBackup() {
            exportData();
        }

        // ‡πÅ‡∏™‡∏î‡∏á Modal ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
        function showImportModal() {
            document.getElementById('importModal').style.display = 'block';
        }

        // ‡∏ã‡πà‡∏≠‡∏ô Modal ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
        function hideImportModal() {
            document.getElementById('importModal').style.display = 'none';
            document.getElementById('importFile').value = '';
        }

        // ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
        function importData() {
            const fileInput = document.getElementById('importFile');
            const file = fileInput.files[0];
            
            if (!file) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå‡∏Å‡πà‡∏≠‡∏ô');
                return;
            }
            
            if (!file.name.endsWith('.json')) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå .json ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const importedData = JSON.parse(e.target.result);
                    
                    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                    if (!importedData.data || typeof importedData.data !== 'object') {
                        throw new Error('‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á');
                    }
                    
                    // ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤
                    const confirmImport = confirm(
                        `‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?\n\n` +
                        `‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå: ${importedData.totalMembers || Object.keys(importedData.data).length} ‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å\n` +
                        `‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏£‡∏≠‡∏á: ${importedData.exportDate ? new Date(importedData.exportDate).toLocaleDateString('th-TH') : '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏'}\n\n` +
                        `‚ö†Ô∏è ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î`
                    );
                    
                    if (confirmImport) {
                        allMembers = importedData.data;
                        currentMemberId = null;
                        
                        // ‡∏ã‡πà‡∏≠‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ï‡πà‡∏≤‡∏á‡πÜ
                        document.getElementById('savingsStatus').style.display = 'none';
                        document.getElementById('savingsForm').style.display = 'none';
                        document.getElementById('historySection').style.display = 'none';
                        document.getElementById('printSection').style.display = 'none';
                        
                        saveData();
                        displayMembers();
                        hideImportModal();
                        
                        alert(`‚úÖ ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!\n\n‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å ${Object.keys(allMembers).length} ‡∏Ñ‡∏ô`);
                    }
                    
                } catch (error) {
                    alert('‚ùå ‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢\n\n‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏•‡∏∞‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà');
                    console.error('Import error:', error);
                }
            };
            
            reader.readAsText(file);
        }

        // ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å
        function displayMembers(filteredMembers = null) {
            const membersList = document.getElementById('membersList');
            const noResults = document.getElementById('noResults');
            
            // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥
            updateMemberStats();
            
            const membersToShow = filteredMembers || Object.entries(allMembers);
            
            if (Object.keys(allMembers).length === 0) {
                membersList.innerHTML = '<div class="text-center py-8 text-gray-500 col-span-full">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÉ‡∏´‡∏°‡πà" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô</div>';
                noResults.style.display = 'none';
                return;
            }
            
            if (membersToShow.length === 0) {
                membersList.innerHTML = '';
                noResults.style.display = 'block';
                return;
            }
            
            noResults.style.display = 'none';
            membersList.innerHTML = membersToShow.map(([id, member]) => {
                const progress = member.targetAmount > 0 ? (member.currentSavings / member.targetAmount) * 100 : 0;
                const isComplete = member.currentSavings >= member.targetAmount && member.targetAmount > 0;
                
                return `
                    <div class="member-card border rounded-lg p-4 ${currentMemberId === id ? 'active' : ''}" onclick="selectMember('${id}')">
                        <div class="flex justify-between items-start mb-2">
                            <h4 class="font-medium text-gray-800">${member.personalInfo.firstName} ${member.personalInfo.lastName}</h4>
                            ${isComplete ? '<span class="text-green-500 text-sm">‚úÖ ‡∏Ñ‡∏£‡∏ö‡πÅ‡∏•‡πâ‡∏ß</span>' : ''}
                        </div>
                        <p class="text-sm text-gray-600 mb-2">${member.personalInfo.phoneNumber}</p>
                        <div class="text-sm">
                            <p class="text-gray-600">‡∏≠‡∏≠‡∏°: <span class="font-medium text-blue-600">${member.currentSavings.toLocaleString()}</span> / ${member.targetAmount.toLocaleString()} ‡∏ö‡∏≤‡∏ó</p>
                            <div class="w-full bg-gray-200 rounded-full h-2 mt-2">
                                <div class="bg-blue-500 h-2 rounded-full" style="width: ${Math.min(100, progress)}%"></div>
                            </div>
                            <p class="text-xs text-gray-500 mt-1">${Math.round(progress)}% ‡∏Ç‡∏≠‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢</p>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å
        function updateMemberStats() {
            const totalMembers = Object.keys(allMembers).length;
            let completedMembers = 0;
            let totalSavings = 0;
            
            Object.values(allMembers).forEach(member => {
                if (member.currentSavings >= member.targetAmount && member.targetAmount > 0) {
                    completedMembers++;
                }
                totalSavings += member.currentSavings;
            });
            
            const activeMembers = totalMembers - completedMembers;
            
            document.getElementById('totalMembers').textContent = totalMembers;
            document.getElementById('completedMembers').textContent = completedMembers;
            document.getElementById('activeMembers').textContent = activeMembers;
            document.getElementById('totalSavings').textContent = totalSavings.toLocaleString();
        }

        // ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å
        function filterMembers() {
            const searchTerm = document.getElementById('searchMembers').value.toLowerCase();
            const sortBy = document.getElementById('sortMembers').value;
            
            let filtered = Object.entries(allMembers);
            
            // ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
            if (searchTerm) {
                filtered = filtered.filter(([id, member]) => {
                    const fullName = `${member.personalInfo.firstName} ${member.personalInfo.lastName}`.toLowerCase();
                    const phone = member.personalInfo.phoneNumber.toLowerCase();
                    return fullName.includes(searchTerm) || phone.includes(searchTerm);
                });
            }
            
            // ‡∏à‡∏±‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏á
            filtered.sort(([idA, memberA], [idB, memberB]) => {
                switch (sortBy) {
                    case 'name':
                        const nameA = `${memberA.personalInfo.firstName} ${memberA.personalInfo.lastName}`;
                        const nameB = `${memberB.personalInfo.firstName} ${memberB.personalInfo.lastName}`;
                        return nameA.localeCompare(nameB, 'th');
                    
                    case 'progress':
                        const progressA = memberA.targetAmount > 0 ? (memberA.currentSavings / memberA.targetAmount) : 0;
                        const progressB = memberB.targetAmount > 0 ? (memberB.currentSavings / memberB.targetAmount) : 0;
                        return progressB - progressA;
                    
                    case 'completed':
                        const completeA = memberA.currentSavings >= memberA.targetAmount && memberA.targetAmount > 0;
                        const completeB = memberB.currentSavings >= memberB.targetAmount && memberB.targetAmount > 0;
                        if (completeA && !completeB) return -1;
                        if (!completeA && completeB) return 1;
                        return 0;
                    
                    case 'recent':
                        return new Date(memberB.createdAt) - new Date(memberA.createdAt);
                    
                    case 'amount':
                        return memberB.currentSavings - memberA.currentSavings;
                    
                    default:
                        return 0;
                }
            });
            
            displayMembers(filtered);
        }

        // ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å
        function selectMember(memberId) {
            currentMemberId = memberId;
            displayMembers(); // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•
            updateCurrentMemberDisplay();
            
            // ‡πÅ‡∏™‡∏î‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏ï‡πà‡∏≤‡∏á‡πÜ
            document.getElementById('savingsStatus').style.display = 'block';
            document.getElementById('savingsForm').style.display = 'block';
            document.getElementById('historySection').style.display = 'block';
            document.getElementById('printSection').style.display = 'block';
        }

        // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
        function updateCurrentMemberDisplay() {
            if (!currentMemberId || !allMembers[currentMemberId]) return;
            
            const member = allMembers[currentMemberId];
            
            document.getElementById('currentMemberName').textContent = 
                `${member.personalInfo.firstName} ${member.personalInfo.lastName}`;
            
            document.getElementById('currentSavings').textContent = member.currentSavings.toLocaleString();
            document.getElementById('targetAmount').textContent = member.targetAmount.toLocaleString();
            
            const remaining = Math.max(0, member.targetAmount - member.currentSavings);
            document.getElementById('remainingAmount').textContent = remaining.toLocaleString();
            
            const progress = member.targetAmount > 0 ? (member.currentSavings / member.targetAmount) * 100 : 0;
            document.getElementById('progressBar').style.width = Math.min(100, progress) + '%';
            document.getElementById('progressText').textContent = Math.round(progress) + '% ‡∏Ç‡∏≠‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢';
            
            // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏ü‡∏≠‡∏£‡πå‡∏°
            document.getElementById('targetPrice').value = member.targetAmount;
            
            // ‡∏õ‡∏∏‡πà‡∏°‡∏û‡∏¥‡∏°‡∏û‡πå‡πÅ‡∏•‡∏∞‡πÅ‡∏ä‡∏£‡πå
            const printLatestBtn = document.getElementById('printLatestBtn');
            const printAllBtn = document.getElementById('printAllBtn');
            const shareLatestBtn = document.getElementById('shareLatestBtn');
            const shareAllBtn = document.getElementById('shareAllBtn');
            
            if (member.currentSavings > 0) {
                // ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏õ‡∏∏‡πà‡∏°‡∏û‡∏¥‡∏°‡∏û‡πå
                printLatestBtn.disabled = false;
                printAllBtn.disabled = false;
                shareLatestBtn.disabled = false;
                shareAllBtn.disabled = false;
                
                printLatestBtn.classList.remove('bg-gray-400');
                printLatestBtn.classList.add('bg-blue-500', 'hover:bg-blue-600');
                
                printAllBtn.classList.remove('bg-gray-400');
                printAllBtn.classList.add('bg-green-500', 'hover:bg-green-600');
                
                shareLatestBtn.classList.remove('bg-gray-400');
                shareLatestBtn.classList.add('bg-purple-500', 'hover:bg-purple-600');
                
                shareAllBtn.classList.remove('bg-gray-400');
                shareAllBtn.classList.add('bg-indigo-500', 'hover:bg-indigo-600');
                
                if (member.currentSavings >= member.targetAmount && member.targetAmount > 0) {
                    printAllBtn.textContent = 'üìã ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î - ‡∏Ñ‡∏£‡∏ö‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢! üéâ';
                    shareAllBtn.textContent = 'üìä ‡πÅ‡∏ä‡∏£‡πå‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î - ‡∏Ñ‡∏£‡∏ö‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢! üéâ';
                } else {
                    printAllBtn.textContent = 'üìã ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î';
                    shareAllBtn.textContent = 'üìä ‡πÅ‡∏ä‡∏£‡πå‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î';
                }
            } else {
                // ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏õ‡∏∏‡πà‡∏°‡∏û‡∏¥‡∏°‡∏û‡πå‡πÅ‡∏•‡∏∞‡πÅ‡∏ä‡∏£‡πå
                printLatestBtn.disabled = true;
                printAllBtn.disabled = true;
                shareLatestBtn.disabled = true;
                shareAllBtn.disabled = true;
                
                printLatestBtn.classList.add('bg-gray-400');
                printLatestBtn.classList.remove('bg-blue-500', 'hover:bg-blue-600');
                
                printAllBtn.classList.add('bg-gray-400');
                printAllBtn.classList.remove('bg-green-500', 'hover:bg-green-600');
                
                shareLatestBtn.classList.add('bg-gray-400');
                shareLatestBtn.classList.remove('bg-purple-500', 'hover:bg-purple-600');
                
                shareAllBtn.classList.add('bg-gray-400');
                shareAllBtn.classList.remove('bg-indigo-500', 'hover:bg-indigo-600');
                
                printAllBtn.textContent = 'üìã ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î';
                shareAllBtn.textContent = 'üìä ‡πÅ‡∏ä‡∏£‡πå‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î';
            }
            
            displayHistory();
        }

        // ‡πÅ‡∏™‡∏î‡∏á‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°
        function displayHistory() {
            if (!currentMemberId || !allMembers[currentMemberId]) return;
            
            const member = allMembers[currentMemberId];
            const historyContainer = document.getElementById('savingsHistory');
            
            if (member.history.length === 0) {
                historyContainer.innerHTML = '<p class="text-gray-500 text-center py-8">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô</p>';
                return;
            }
            
            historyContainer.innerHTML = member.history.map((record, index) => `
                <div class="border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition duration-200">
                    <div class="flex justify-between items-start mb-2">
                        <h4 class="font-medium text-gray-800">‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà ${index + 1}</h4>
                        <span class="text-lg font-bold text-green-600">+${record.amount.toLocaleString()} ‡∏ö‡∏≤‡∏ó</span>
                    </div>
                    <div class="grid md:grid-cols-2 gap-2 text-sm text-gray-600">
                        <p><strong>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:</strong> ${record.date}</p>
                        <p><strong>‡πÄ‡∏ß‡∏•‡∏≤:</strong> ${record.time}</p>
                        <p><strong>‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°:</strong> ${record.totalAfter.toLocaleString()} ‡∏ö‡∏≤‡∏ó</p>
                        <p><strong>‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏≠‡∏µ‡∏Å:</strong> ${Math.max(0, member.targetAmount - record.totalAfter).toLocaleString()} ‡∏ö‡∏≤‡∏ó</p>
                    </div>
                </div>
            `).join('');
        }

        // ‡πÅ‡∏™‡∏î‡∏á Modal ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å
        function showAddMemberModal() {
            document.getElementById('addMemberModal').style.display = 'block';
        }

        // ‡∏ã‡πà‡∏≠‡∏ô Modal ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å
        function hideAddMemberModal() {
            document.getElementById('addMemberModal').style.display = 'none';
            document.getElementById('newMemberForm').reset();
        }

        // ‡∏•‡∏ö‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å
        function deleteMember() {
            if (!currentMemberId) return;
            
            const member = allMembers[currentMemberId];
            const confirmDelete = confirm(`‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å "${member.personalInfo.firstName} ${member.personalInfo.lastName}" ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?\n\n‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Å‡∏π‡πâ‡∏Ñ‡∏∑‡∏ô‡πÑ‡∏î‡πâ`);
            
            if (confirmDelete) {
                delete allMembers[currentMemberId];
                currentMemberId = null;
                
                // ‡∏ã‡πà‡∏≠‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ï‡πà‡∏≤‡∏á‡πÜ
                document.getElementById('savingsStatus').style.display = 'none';
                document.getElementById('savingsForm').style.display = 'none';
                document.getElementById('historySection').style.display = 'none';
                document.getElementById('printSection').style.display = 'none';
                
                saveData();
                displayMembers();
                
                alert('‡∏•‡∏ö‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß');
            }
        }

        // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÉ‡∏´‡∏°‡πà
        document.getElementById('newMemberForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const data = Object.fromEntries(formData.entries());
            
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á ID ‡πÉ‡∏´‡∏°‡πà
            const memberId = 'member_' + Date.now();
            
            // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÉ‡∏´‡∏°‡πà
            allMembers[memberId] = {
                personalInfo: {
                    firstName: data.firstName,
                    lastName: data.lastName,
                    phoneNumber: data.phoneNumber,
                    productDetails: data.productDetails
                },
                targetAmount: parseInt(data.targetPrice),
                currentSavings: 0,
                history: [],
                createdAt: new Date().toISOString()
            };
            
            saveData();
            displayMembers();
            hideAddMemberModal();
            
            // ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
            selectMember(memberId);
            
            alert(`‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å "${data.firstName} ${data.lastName}" ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß`);
        });

        // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô
        document.getElementById('addSavingForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            if (!currentMemberId) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏Å‡πà‡∏≠‡∏ô');
                return;
            }
            
            const formData = new FormData(e.target);
            const data = Object.fromEntries(formData.entries());
            
            const member = allMembers[currentMemberId];
            
            // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á
            if (data.targetPrice && parseInt(data.targetPrice) !== member.targetAmount) {
                member.targetAmount = parseInt(data.targetPrice);
            }
            
            // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡πÉ‡∏´‡∏°‡πà
            const savingAmount = parseInt(data.savingAmount);
            member.currentSavings += savingAmount;
            
            // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥
            member.history.push({
                amount: savingAmount,
                date: data.scanDate,
                time: data.scanTime,
                totalAfter: member.currentSavings,
                timestamp: new Date().toISOString()
            });
            
            saveData();
            updateCurrentMemberDisplay();
            displayMembers();
            
            // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°
            document.getElementById('savingAmount').value = '';
            document.getElementById('scanDate').value = '';
            document.getElementById('scanTime').value = '';
            setCurrentDateTime();
            
            if (member.currentSavings >= member.targetAmount) {
                alert('üéâ ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢! ‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô‡∏Ñ‡∏£‡∏ö‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡πÑ‡∏î‡πâ');
            } else {
                alert('‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß');
            }
        });

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏û‡∏¥‡∏°‡∏û‡πå‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
        function printLatestReceipt() {
            if (!currentMemberId) return;
            
            const member = allMembers[currentMemberId];
            if (member.history.length === 0) {
                alert('‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡πÑ‡∏î‡πâ');
                return;
            }
            
            const latestRecord = member.history[member.history.length - 1];
            const receiptDetails = document.getElementById('receiptDetails');
            const now = new Date();
            const recordDate = new Date(latestRecord.date).toLocaleDateString('th-TH');
            const isComplete = member.currentSavings >= member.targetAmount && member.targetAmount > 0;
            const remaining = Math.max(0, member.targetAmount - latestRecord.totalAfter);
            
            receiptDetails.innerHTML = `
                <p><strong>‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•:</strong><br>${member.personalInfo.firstName} ${member.personalInfo.lastName}</p>
                <p><strong>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£:</strong> ${member.personalInfo.phoneNumber}</p>
                <p><strong>‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ã‡∏∑‡πâ‡∏≠:</strong><br>${member.personalInfo.productDetails}</p>
                <p class="text-xs">--------------------------------</p>
                <p><strong>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î (‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà ${member.history.length})</strong></p>
                <p><strong>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏≠‡∏°:</strong> ${recordDate}</p>
                <p><strong>‡πÄ‡∏ß‡∏•‡∏≤:</strong> ${latestRecord.time}</p>
                <p><strong>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏≠‡∏°:</strong> ${latestRecord.amount.toLocaleString()} ‡∏ö‡∏≤‡∏ó</p>
                <p class="text-xs">--------------------------------</p>
                <p><strong>‡∏¢‡∏≠‡∏î‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢:</strong> ${member.targetAmount.toLocaleString()} ‡∏ö‡∏≤‡∏ó</p>
                <p><strong>‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏´‡∏•‡∏±‡∏á‡∏≠‡∏≠‡∏°:</strong> ${latestRecord.totalAfter.toLocaleString()} ‡∏ö‡∏≤‡∏ó</p>
                ${remaining > 0 ? `<p><strong>‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏≠‡∏µ‡∏Å:</strong> ${remaining.toLocaleString()} ‡∏ö‡∏≤‡∏ó</p>` : ''}
                <p><strong>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:</strong> ${latestRecord.totalAfter >= member.targetAmount && member.targetAmount > 0 ? '‚úÖ ‡∏Ñ‡∏£‡∏ö‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß' : 'üîÑ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô'}</p>
            `;
            
            document.getElementById('receiptDateTime').textContent = 
                `‡∏û‡∏¥‡∏°‡∏û‡πå‡πÄ‡∏°‡∏∑‡πà‡∏≠: ${now.toLocaleDateString('th-TH')} ${now.toLocaleTimeString('th-TH')}`;
            
            document.getElementById('receiptContent').style.display = 'block';
            window.print();
            document.getElementById('receiptContent').style.display = 'none';
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏û‡∏¥‡∏°‡∏û‡πå‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
        function printAllReceipt() {
            if (!currentMemberId) return;
            
            const member = allMembers[currentMemberId];
            if (member.currentSavings === 0) {
                alert('‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡πÑ‡∏î‡πâ');
                return;
            }
            
            const receiptDetails = document.getElementById('receiptDetails');
            const now = new Date();
            const isComplete = member.currentSavings >= member.targetAmount && member.targetAmount > 0;
            const remaining = Math.max(0, member.targetAmount - member.currentSavings);
            const progress = member.targetAmount > 0 ? Math.round((member.currentSavings / member.targetAmount) * 100) : 0;
            
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ñ‡∏£‡∏±‡πâ‡∏á
            let savingDetails = '';
            if (member.history.length > 0) {
                savingDetails = '<p class="text-xs">--- ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏° ---</p>';
                member.history.forEach((record, index) => {
                    const recordDate = new Date(record.date).toLocaleDateString('th-TH');
                    savingDetails += `
                        <p class="text-xs"><strong>‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà ${index + 1}:</strong> ${recordDate}</p>
                        <p class="text-xs">‡πÄ‡∏ß‡∏•‡∏≤: ${record.time} | ‡∏≠‡∏≠‡∏°: ${record.amount.toLocaleString()} ‡∏ö‡∏≤‡∏ó</p>
                        <p class="text-xs">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°: ${record.totalAfter.toLocaleString()} ‡∏ö‡∏≤‡∏ó</p>
                        ${index < member.history.length - 1 ? '<p class="text-xs">- - - - - - - - - - - - - - - -</p>' : ''}
                    `;
                });
            }
            
            receiptDetails.innerHTML = `
                <p><strong>‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•:</strong><br>${member.personalInfo.firstName} ${member.personalInfo.lastName}</p>
                <p><strong>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£:</strong> ${member.personalInfo.phoneNumber}</p>
                <p><strong>‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ã‡∏∑‡πâ‡∏≠:</strong><br>${member.personalInfo.productDetails}</p>
                <p class="text-xs">--------------------------------</p>
                <p><strong>‡∏¢‡∏≠‡∏î‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢:</strong> ${member.targetAmount.toLocaleString()} ‡∏ö‡∏≤‡∏ó</p>
                <p><strong>‡∏¢‡∏≠‡∏î‡∏ó‡∏µ‡πà‡∏≠‡∏≠‡∏°‡πÑ‡∏î‡πâ:</strong> ${member.currentSavings.toLocaleString()} ‡∏ö‡∏≤‡∏ó</p>
                <p><strong>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏≠‡∏≠‡∏°:</strong> ${member.history.length} ‡∏Ñ‡∏£‡∏±‡πâ‡∏á</p>
                <p><strong>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤:</strong> ${progress}%</p>
                ${!isComplete ? `<p><strong>‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏≠‡∏µ‡∏Å:</strong> ${remaining.toLocaleString()} ‡∏ö‡∏≤‡∏ó</p>` : ''}
                <p class="text-xs">--------------------------------</p>
                ${savingDetails}
                ${savingDetails ? '<p class="text-xs">--------------------------------</p>' : ''}
                <p><strong>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:</strong> ${isComplete ? '‚úÖ ‡∏Ñ‡∏£‡∏ö‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß' : 'üîÑ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô'}</p>
            `;
            
            document.getElementById('receiptDateTime').textContent = 
                `‡∏û‡∏¥‡∏°‡∏û‡πå‡πÄ‡∏°‡∏∑‡πà‡∏≠: ${now.toLocaleDateString('th-TH')} ${now.toLocaleTimeString('th-TH')}`;
            
            document.getElementById('receiptContent').style.display = 'block';
            window.print();
            document.getElementById('receiptContent').style.display = 'none';
        }

        // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
        function setCurrentDateTime() {
            const now = new Date();
            const today = now.toISOString().split('T')[0];
            const currentTime = now.toTimeString().slice(0, 5);
            
            document.getElementById('scanDate').value = today;
            document.getElementById('scanTime').value = currentTime;
        }

        // ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à
        let currentReceiptData = null;
        let currentReceiptUrl = '';

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏ö‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤
        function generateReceiptText(isLatest = true) {
            if (!currentMemberId) return '';
            
            const member = allMembers[currentMemberId];
            const now = new Date();
            const isComplete = member.currentSavings >= member.targetAmount && member.targetAmount > 0;
            
            let receiptText = '';
            receiptText += 'üßæ ‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô\n';
            receiptText += 'üí∞ ‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ô‡∏•‡∏∞‡∏Ñ‡∏£‡∏∂‡πà‡∏á‡∏û‡∏•‡∏±‡∏™\n';
            receiptText += '================================\n\n';
            
            receiptText += 'üë§ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å\n';
            receiptText += `‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•: ${member.personalInfo.firstName} ${member.personalInfo.lastName}\n`;
            receiptText += `üìû ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£: ${member.personalInfo.phoneNumber}\n`;
            receiptText += `üõçÔ∏è ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ã‡∏∑‡πâ‡∏≠: ${member.personalInfo.productDetails}\n\n`;
            receiptText += '--------------------------------\n';
            
            if (isLatest && member.history.length > 0) {
                const latestRecord = member.history[member.history.length - 1];
                const recordDate = new Date(latestRecord.date).toLocaleDateString('th-TH');
                const remaining = Math.max(0, member.targetAmount - latestRecord.totalAfter);
                
                receiptText += `üìã ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î (‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà ${member.history.length})\n`;
                receiptText += `üìÖ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏≠‡∏°: ${recordDate}\n`;
                receiptText += `‚è∞ ‡πÄ‡∏ß‡∏•‡∏≤: ${latestRecord.time}\n`;
                receiptText += `üíµ ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏≠‡∏°: +${latestRecord.amount.toLocaleString()} ‡∏ö‡∏≤‡∏ó\n\n`;
                receiptText += '--------------------------------\n';
                receiptText += `üéØ ‡∏¢‡∏≠‡∏î‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: ${member.targetAmount.toLocaleString()} ‡∏ö‡∏≤‡∏ó\n`;
                receiptText += `üí∞ ‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏´‡∏•‡∏±‡∏á‡∏≠‡∏≠‡∏°: ${latestRecord.totalAfter.toLocaleString()} ‡∏ö‡∏≤‡∏ó\n`;
                if (remaining > 0) {
                    receiptText += `‚è≥ ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏≠‡∏µ‡∏Å: ${remaining.toLocaleString()} ‡∏ö‡∏≤‡∏ó\n`;
                }
            } else {
                const remaining = Math.max(0, member.targetAmount - member.currentSavings);
                const progress = member.targetAmount > 0 ? Math.round((member.currentSavings / member.targetAmount) * 100) : 0;
                
                receiptText += 'üìä ‡∏™‡∏£‡∏∏‡∏õ‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î\n';
                receiptText += `üéØ ‡∏¢‡∏≠‡∏î‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: ${member.targetAmount.toLocaleString()} ‡∏ö‡∏≤‡∏ó\n`;
                receiptText += `üí∞ ‡∏¢‡∏≠‡∏î‡∏ó‡∏µ‡πà‡∏≠‡∏≠‡∏°‡πÑ‡∏î‡πâ: ${member.currentSavings.toLocaleString()} ‡∏ö‡∏≤‡∏ó\n`;
                receiptText += `üî¢ ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏≠‡∏≠‡∏°: ${member.history.length} ‡∏Ñ‡∏£‡∏±‡πâ‡∏á\n`;
                receiptText += `üìà ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤: ${progress}%\n`;
                if (!isComplete) {
                    receiptText += `‚è≥ ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏≠‡∏µ‡∏Å: ${remaining.toLocaleString()} ‡∏ö‡∏≤‡∏ó\n`;
                }
                
                if (member.history.length > 0) {
                    receiptText += '\n--- ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏° ---\n';
                    member.history.forEach((record, index) => {
                        const recordDate = new Date(record.date).toLocaleDateString('th-TH');
                        receiptText += `${index + 1}. ${recordDate} | ${record.time}\n`;
                        receiptText += `   ‡∏≠‡∏≠‡∏°: ${record.amount.toLocaleString()} ‡∏ö‡∏≤‡∏ó | ‡∏£‡∏ß‡∏°: ${record.totalAfter.toLocaleString()} ‡∏ö‡∏≤‡∏ó\n`;
                    });
                }
            }
            
            receiptText += '\n================================\n';
            receiptText += `üìä ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ${isComplete ? '‚úÖ ‡∏Ñ‡∏£‡∏ö‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß' : 'üîÑ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô'}\n\n`;
            receiptText += 'üôè ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£\n';
            receiptText += `üìÖ ${now.toLocaleDateString('th-TH')} ${now.toLocaleTimeString('th-TH')}\n`;
            
            return receiptText;
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à HTML ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô‡πÅ‡∏ó‡πá‡∏ö‡πÉ‡∏´‡∏°‡πà
        function generateReceiptHTML(isLatest = true) {
            if (!currentMemberId) return '';
            
            const member = allMembers[currentMemberId];
            const now = new Date();
            const isComplete = member.currentSavings >= member.targetAmount && member.targetAmount > 0;
            
            let receiptHTML = `<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô - ${member.personalInfo.firstName} ${member.personalInfo.lastName}</title>
    <style>
        body {
            font-family: 'Sarabun', 'Tahoma', sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        
        .receipt {
            width: 80mm;
            background: white;
            padding: 10mm;
            font-size: 12px;
            line-height: 1.4;
            color: black;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            border-radius: 8px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 15px;
            border-bottom: 2px dashed #333;
            padding-bottom: 10px;
        }
        
        .title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .subtitle {
            font-size: 12px;
            color: #666;
            margin-bottom: 5px;
        }
        
        .section {
            margin: 10px 0;
            padding: 8px 0;
        }
        
        .section-title {
            font-weight: bold;
            margin-bottom: 5px;
            color: #333;
        }
        
        .info-row {
            display: flex;
            justify-content: space-between;
            margin: 3px 0;
        }
        
        .amount {
            font-weight: bold;
            color: #2563eb;
        }
        
        .status {
            text-align: center;
            padding: 8px;
            margin: 10px 0;
            border-radius: 4px;
            font-weight: bold;
        }
        
        .status.complete {
            background: #dcfce7;
            color: #166534;
            border: 1px solid #bbf7d0;
        }
        
        .status.progress {
            background: #fef3c7;
            color: #92400e;
            border: 1px solid #fde68a;
        }
        
        .footer {
            text-align: center;
            margin-top: 15px;
            padding-top: 10px;
            border-top: 2px dashed #333;
            font-size: 10px;
            color: #666;
        }
        
        .divider {
            border-top: 1px dashed #ccc;
            margin: 8px 0;
        }
        
        .history-item {
            background: #f8f9fa;
            padding: 6px;
            margin: 4px 0;
            border-radius: 4px;
            font-size: 11px;
        }
        
        @media print {
            body {
                background: white;
                padding: 0;
            }
            .receipt {
                box-shadow: none;
                border-radius: 0;
                width: 80mm;
                margin: 0;
            }
            .print-btn {
                display: none;
            }
        }
        
        .print-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #2563eb;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .print-btn:hover {
            background: #1d4ed8;
        }
    </style>
</head>
<body>
    <button class="print-btn" onclick="window.print()">üñ®Ô∏è ‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à</button>
    
    <div class="receipt">
        <div class="header">
            <div class="title">üßæ ‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô</div>
            <div class="subtitle">üí∞ ‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ô‡∏•‡∏∞‡∏Ñ‡∏£‡∏∂‡πà‡∏á‡∏û‡∏•‡∏±‡∏™</div>
        </div>
        
        <div class="section">
            <div class="section-title">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</div>
            <div class="info-row">
                <span>üë§ ‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•:</span>
            </div>
            <div style="margin-left: 15px; font-weight: bold;">${member.personalInfo.firstName} ${member.personalInfo.lastName}</div>
            
            <div class="info-row">
                <span>üìû ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£:</span>
                <span>${member.personalInfo.phoneNumber}</span>
            </div>
            
            <div class="info-row">
                <span>üõçÔ∏è ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ã‡∏∑‡πâ‡∏≠:</span>
            </div>
            <div style="margin-left: 15px; word-wrap: break-word;">${member.personalInfo.productDetails}</div>
        </div>
        
        <div class="divider"></div>
`;

            if (isLatest && member.history.length > 0) {
                const latestRecord = member.history[member.history.length - 1];
                const recordDate = new Date(latestRecord.date).toLocaleDateString('th-TH');
                const remaining = Math.max(0, member.targetAmount - latestRecord.totalAfter);
                
                receiptHTML += `
        <div class="section">
            <div class="section-title">üìã ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î (‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà ${member.history.length})</div>
            
            <div class="info-row">
                <span>üìÖ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏≠‡∏°:</span>
                <span>${recordDate}</span>
            </div>
            
            <div class="info-row">
                <span>‚è∞ ‡πÄ‡∏ß‡∏•‡∏≤:</span>
                <span>${latestRecord.time}</span>
            </div>
            
            <div class="info-row">
                <span>üíµ ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏≠‡∏°:</span>
                <span class="amount">+${latestRecord.amount.toLocaleString()} ‡∏ö‡∏≤‡∏ó</span>
            </div>
        </div>
        
        <div class="divider"></div>
        
        <div class="section">
            <div class="info-row">
                <span>üéØ ‡∏¢‡∏≠‡∏î‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢:</span>
                <span class="amount">${member.targetAmount.toLocaleString()} ‡∏ö‡∏≤‡∏ó</span>
            </div>
            
            <div class="info-row">
                <span>üí∞ ‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏´‡∏•‡∏±‡∏á‡∏≠‡∏≠‡∏°:</span>
                <span class="amount">${latestRecord.totalAfter.toLocaleString()} ‡∏ö‡∏≤‡∏ó</span>
            </div>
            
            ${remaining > 0 ? `
            <div class="info-row">
                <span>‚è≥ ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏≠‡∏µ‡∏Å:</span>
                <span class="amount">${remaining.toLocaleString()} ‡∏ö‡∏≤‡∏ó</span>
            </div>
            ` : ''}
        </div>
`;
            } else {
                const remaining = Math.max(0, member.targetAmount - member.currentSavings);
                const progress = member.targetAmount > 0 ? Math.round((member.currentSavings / member.targetAmount) * 100) : 0;
                
                receiptHTML += `
        <div class="section">
            <div class="section-title">üìä ‡∏™‡∏£‡∏∏‡∏õ‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
            
            <div class="info-row">
                <span>üéØ ‡∏¢‡∏≠‡∏î‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢:</span>
                <span class="amount">${member.targetAmount.toLocaleString()} ‡∏ö‡∏≤‡∏ó</span>
            </div>
            
            <div class="info-row">
                <span>üí∞ ‡∏¢‡∏≠‡∏î‡∏ó‡∏µ‡πà‡∏≠‡∏≠‡∏°‡πÑ‡∏î‡πâ:</span>
                <span class="amount">${member.currentSavings.toLocaleString()} ‡∏ö‡∏≤‡∏ó</span>
            </div>
            
            <div class="info-row">
                <span>üî¢ ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏≠‡∏≠‡∏°:</span>
                <span>${member.history.length} ‡∏Ñ‡∏£‡∏±‡πâ‡∏á</span>
            </div>
            
            <div class="info-row">
                <span>üìà ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤:</span>
                <span class="amount">${progress}%</span>
            </div>
            
            ${!isComplete ? `
            <div class="info-row">
                <span>‚è≥ ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏≠‡∏µ‡∏Å:</span>
                <span class="amount">${remaining.toLocaleString()} ‡∏ö‡∏≤‡∏ó</span>
            </div>
            ` : ''}
        </div>
`;

                if (member.history.length > 0) {
                    receiptHTML += `
        <div class="divider"></div>
        
        <div class="section">
            <div class="section-title">üìù ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°</div>
`;
                    member.history.forEach((record, index) => {
                        const recordDate = new Date(record.date).toLocaleDateString('th-TH');
                        receiptHTML += `
            <div class="history-item">
                <strong>${index + 1}.</strong> ${recordDate} | ${record.time}<br>
                ‡∏≠‡∏≠‡∏°: ${record.amount.toLocaleString()} ‡∏ö‡∏≤‡∏ó | ‡∏£‡∏ß‡∏°: ${record.totalAfter.toLocaleString()} ‡∏ö‡∏≤‡∏ó
            </div>
`;
                    });
                    receiptHTML += `
        </div>
`;
                }
            }

            const statusClass = isComplete ? 'complete' : 'progress';
            const statusText = isComplete ? '‚úÖ ‡∏Ñ‡∏£‡∏ö‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß' : 'üîÑ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô';
            
            receiptHTML += `
        <div class="status ${statusClass}">
            üìä ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ${statusText}
        </div>
        
        <div class="footer">
            <div>üôè ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</div>
            <div>üìÖ ${now.toLocaleDateString('th-TH')} ${now.toLocaleTimeString('th-TH')}</div>
        </div>
    </div>
</body>
</html>
`;
            
            return receiptHTML;
        }

        // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à
        function createReceiptLink(receiptHTML) {
            const blob = new Blob([receiptHTML], { type: 'text/html' });
            return URL.createObjectURL(blob);
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ä‡∏£‡πå
        function generateShareText(isLatest = true) {
            return generateReceiptText(isLatest);
        }

        // ‡πÅ‡∏ä‡∏£‡πå‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
        function shareLatestReceipt() {
            if (!currentMemberId) return;
            
            const member = allMembers[currentMemberId];
            if (member.history.length === 0) {
                alert('‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏ä‡∏£‡πå‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡πÑ‡∏î‡πâ');
                return;
            }
            
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à HTML ‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
            const receiptHTML = generateReceiptHTML(true);
            currentReceiptUrl = createReceiptLink(receiptHTML);
            currentReceiptData = { type: 'latest', isLatest: true };
            
            showShareModal();
        }

        // ‡πÅ‡∏ä‡∏£‡πå‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
        function shareAllReceipt() {
            if (!currentMemberId) return;
            
            const member = allMembers[currentMemberId];
            if (member.currentSavings === 0) {
                alert('‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏ä‡∏£‡πå‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡πÑ‡∏î‡πâ');
                return;
            }
            
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à HTML ‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
            const receiptHTML = generateReceiptHTML(false);
            currentReceiptUrl = createReceiptLink(receiptHTML);
            currentReceiptData = { type: 'all', isLatest: false };
            
            showShareModal();
        }

        // ‡πÅ‡∏™‡∏î‡∏á Modal ‡πÅ‡∏ä‡∏£‡πå
        function showShareModal() {
            const shareText = generateShareText(currentReceiptData.isLatest);
            document.getElementById('sharePreview').innerHTML = shareText.replace(/\n/g, '<br>');
            document.getElementById('shareModal').style.display = 'block';
        }

        // ‡∏ã‡πà‡∏≠‡∏ô Modal ‡πÅ‡∏ä‡∏£‡πå
        function hideShareModal() {
            document.getElementById('shareModal').style.display = 'none';
            // ‡∏•‡πâ‡∏≤‡∏á‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÄ‡∏Å‡πà‡∏≤
            if (currentReceiptUrl) {
                URL.revokeObjectURL(currentReceiptUrl);
                currentReceiptUrl = '';
            }
        }

        // ‡πÅ‡∏ä‡∏£‡πå‡πÉ‡∏ô LINE
        function shareToLine() {
            const shareText = generateShareText(currentReceiptData.isLatest);
            const encodedText = encodeURIComponent(shareText);
            const lineUrl = `https://social-plugins.line.me/lineit/share?url=${encodedText}`;
            window.open(lineUrl, '_blank', 'noopener,noreferrer');
        }

        // ‡πÅ‡∏ä‡∏£‡πå‡πÉ‡∏ô Facebook
        function shareToFacebook() {
            const shareText = generateShareText(currentReceiptData.isLatest);
            const encodedText = encodeURIComponent(shareText);
            const facebookUrl = `https://www.facebook.com/sharer/sharer.php?quote=${encodedText}`;
            window.open(facebookUrl, '_blank', 'noopener,noreferrer');
        }

        // ‡πÅ‡∏ä‡∏£‡πå‡πÉ‡∏ô WhatsApp
        function shareViaWhatsApp() {
            const shareText = generateShareText(currentReceiptData.isLatest);
            const encodedText = encodeURIComponent(shareText);
            const whatsappUrl = `https://wa.me/?text=${encodedText}`;
            window.open(whatsappUrl, '_blank', 'noopener,noreferrer');
        }

        // ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
        function copyReceiptText() {
            const shareText = generateShareText(currentReceiptData.isLatest);
            
            navigator.clipboard.writeText(shareText).then(function() {
                // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô
                const originalText = event.target.textContent;
                event.target.textContent = '‚úÖ ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß!';
                event.target.classList.add('bg-green-600');
                event.target.classList.remove('bg-gray-600');
                
                setTimeout(() => {
                    event.target.textContent = originalText;
                    event.target.classList.remove('bg-green-600');
                    event.target.classList.add('bg-gray-600');
                }, 2000);
            }).catch(function(err) {
                // ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö clipboard API
                const textArea = document.createElement('textarea');
                textArea.value = shareText;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                
                alert('‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!');
            });
        }

        // ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡πÉ‡∏ô‡πÅ‡∏ó‡πá‡∏ö‡πÉ‡∏´‡∏°‡πà
        function openReceiptInNewTab() {
            window.open(currentReceiptUrl, '_blank', 'noopener,noreferrer');
        }

        // ‡∏õ‡∏¥‡∏î Modal ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ô‡∏≠‡∏Å‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà
        window.onclick = function(event) {
            const addModal = document.getElementById('addMemberModal');
            const importModal = document.getElementById('importModal');
            const shareModal = document.getElementById('shareModal');
            
            if (event.target === addModal) {
                hideAddMemberModal();
            }
            if (event.target === importModal) {
                hideImportModal();
            }
            if (event.target === shareModal) {
                hideShareModal();
            }
        }

        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö
        document.addEventListener('DOMContentLoaded', function() {
            loadData();
            setCurrentDateTime();
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9920b859a7b42705',t:'MTc2MTA0OTM0My4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
